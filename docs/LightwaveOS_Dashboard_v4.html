<html lang="en"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>LightwaveOS Dashboard V4</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&amp;family=Inter:wght@400;500;600&amp;display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://code.iconify.design/iconify-icon/1.0.8/iconify-icon.min.js"></script>
<style>
/* Pulse animations */
@keyframes pulse-glow {
0%, 100% { box-shadow: 0 0 8px rgba(34,221,136,0.5); }
50% { box-shadow: 0 0 16px rgba(34,221,136,0.8), 0 0 24px rgba(34,221,136,0.4); }
}
@keyframes pulse-glow-red {
0%, 100% { box-shadow: 0 0 8px rgba(239,68,68,0.5); }
50% { box-shadow: 0 0 16px rgba(239,68,68,0.8), 0 0 24px rgba(239,68,68,0.4); }
}
@keyframes shake {
0%, 100% { transform: translateX(0); }
25% { transform: translateX(-2px); }
75% { transform: translateX(2px); }
}
.status-pulse-connected { animation: pulse-glow 2s ease-in-out infinite; }
.status-pulse-disconnected { animation: pulse-glow-red 1s ease-in-out infinite; }
.status-shake { animation: shake 0.3s ease-in-out; }
/* Card hover effects */
.card-hover {
transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.card-hover:hover {
transform: translateY(-2px);
box-shadow: 0 20px 48px rgba(0,0,0,0.45);
}
/* Tab animations */
.tab-underline {
transition: transform 0.25s ease-out, width 0.25s ease-out;
}
.tab-content {
opacity: 0;
transition: opacity 0.2s ease;
}
.tab-content.active {
opacity: 1;
}
.tab-btn span {
display: inline-block;
transition: transform 0.2s ease, color 0.2s ease;
}
.tab-btn.active span {
transform: scale(1.02);
}
/* Button hover effects */
.btn-primary {
transition: filter 0.2s ease, transform 0.2s ease;
}
.btn-primary:hover {
filter: brightness(1.1);
transform: scale(1.02);
}
.btn-secondary {
transition: background-color 0.2s ease;
}
.btn-secondary:hover {
background-color: rgba(255,255,255,0.08);
}
/* Slider thumb animations */
.slider-thumb {
transition: transform 0.15s ease, box-shadow 0.15s ease;
}
.slider-thumb.active,
.slider-container:hover .slider-thumb {
transform: translateY(-50%) scale(1.2);
box-shadow: 0 0 12px rgba(255,184,77,0.6);
}
/* Effect list items */
.effect-list-item {
transition: background-color 0.2s ease, border-left 0.2s ease;
border-left: 3px solid transparent;
}
.effect-list-item:hover {
background-color: rgba(255,255,255,0.06);
border-left-color: #ffb84d;
}
.effect-list-item:hover .star-icon {
color: #ffb84d !important;
}
/* Zone tabs */
.zone-tab {
transition: transform 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;
}
.zone-tab:not(.active):hover {
transform: scale(1.03);
}
/* Scene blocks */
.scene-block {
cursor: grab;
user-select: none;
transition: transform 0.15s ease, box-shadow 0.15s ease;
}
.scene-block:active { cursor: grabbing; }
.scene-block.dragging {
transform: scale(1.05);
box-shadow: 0 8px 24px rgba(0,0,0,0.5);
z-index: 100;
}
/* Keyframe diamonds */
.keyframe-diamond { transition: transform 0.15s ease; }
.keyframe-diamond:hover { transform: rotate(45deg) scale(1.3); }
/* Effect cards */
.effect-card {
transition: transform 0.2s ease, border-color 0.2s ease;
}
.effect-card:hover {
transform: translateY(-2px) scale(1.02);
border-color: rgba(110, 231, 243, 0.4);
}
/* Telemetry */
.telemetry-value { font-variant-numeric: tabular-nums; }
/* Shimmer animation */
@keyframes shimmer {
0% { background-position: -200% 0; }
100% { background-position: 200% 0; }
}
.shimmer {
background: linear-gradient(90deg, rgba(255,255,255,0.03) 25%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.03) 75%);
background-size: 200% 100%;
animation: shimmer 1.5s infinite;
}
/* Disconnected banner */
@keyframes slideDown {
from { transform: translateY(-100%); }
to { transform: translateY(0); }
}
@keyframes borderGlow {
0%, 100% { border-color: rgba(239,68,68,0.4); }
50% { border-color: rgba(239,68,68,0.8); }
}
.disconnected-banner {
animation: slideDown 0.3s ease-out, borderGlow 2s ease-in-out infinite;
}
/* Focus visible */
*:focus-visible {
outline: 2px solid #ffb84d;
outline-offset: 2px;
}
/* Mobile tab scroll */
.tab-scroll {
-webkit-overflow-scrolling: touch;
scroll-snap-type: x mandatory;
scrollbar-width: none;
}
.tab-scroll::-webkit-scrollbar {
display: none;
}
.tab-btn {
scroll-snap-align: start;
}
/* Touch targets */
.touch-target {
min-width: 44px;
min-height: 44px;
}
</style></head>
<body class="bg-[#0f1219] min-h-screen" style="font-family:Inter, system-ui, sans-serif; color:#e6e9ef;">
  
  <!-- Disconnected Banner (hidden by default) -->
  <div id="disconnectedBanner" class="hidden disconnected-banner fixed top-0 left-0 right-0 z-50 px-4 py-3" style="background:rgba(239,68,68,0.15); border-bottom:2px solid rgba(239,68,68,0.5);">
    <div class="flex items-center justify-center gap-2">
      <iconify-icon icon="lucide:wifi-off" width="16" height="16" style="color:#ef4444; stroke-width:1.5;"></iconify-icon>
      <span style="font-size:0.75rem; color:#ef4444; font-weight:500;">Connection Lost - Attempting to reconnect...</span>
    </div>
  </div>

  <div class="mx-auto max-w-screen-2xl px-3 py-4 sm:px-4 md:px-6 lg:px-8">
    
    <section class="rounded-2xl overflow-hidden" style="background:rgba(37,45,63,0.55); border:1px solid rgba(255,255,255,0.10); box-shadow:0 0 0 1px rgba(255,255,255,0.04) inset, 0 24px 48px rgba(0,0,0,0.4); backdrop-filter:blur(24px);">
      
      <!-- Header -->
      <header class="flex items-center justify-between px-4 sm:px-6 lg:px-8" style="height:4.5rem; background:rgba(37,45,63,0.95); border-bottom:1px solid rgba(255,255,255,0.10); box-shadow:0 1px 0 rgba(255,255,255,0.08) inset; background-image:radial-gradient(circle at top left, rgba(255,255,255,0.06), transparent 50%);">
        <div class="flex items-center gap-3">
          <div class="grid place-items-center rounded-xl" style="width:2.75rem; height:2.75rem; background:linear-gradient(135deg, #ffb84d 0%, #f59e0b 100%); box-shadow:0 4px 12px rgba(255,184,77,0.3);">
            <iconify-icon icon="lucide:zap" width="22" height="22" style="color:#1c2130; stroke-width:1.5;"></iconify-icon>
          </div>
          <div class="flex flex-col">
            <span class="uppercase tracking-tight" style="font-family:'Bebas Neue', sans-serif; font-size:1.375rem; letter-spacing:0.01em; line-height:1;">LightwaveOS</span>
            <span class="hidden md:block" style="font-size:0.6875rem; color:#8b95a5; letter-spacing:-0.01em;">Dual-strip • 320 LEDs • Center-radiating</span>
          </div>
        </div>
        <div class="flex items-center gap-2 sm:gap-3">
          <div class="flex items-center gap-2 rounded-xl px-2 sm:px-3 py-2" style="background:rgba(47,56,73,0.65); border:1px solid rgba(255,255,255,0.08);">
            <span id="statusDot" class="status-pulse-connected rounded-full" style="width:0.5rem; height:0.5rem; background:#22dd88;"></span>
            <span id="statusText" class="hidden sm:inline" style="font-size:0.6875rem; color:#22dd88; font-weight:500;">CONNECTED</span>
          </div>
          <button class="touch-target grid place-items-center rounded-xl btn-secondary" style="width:2.75rem; height:2.75rem; border:1px solid rgba(255,255,255,0.10);" aria-label="Settings">
            <iconify-icon icon="lucide:settings" width="18" height="18" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
          </button>
        </div>
      </header>

      <!-- Tab Navigation with Sliding Underline -->
      <nav class="relative flex items-center gap-1 px-4 sm:px-6 lg:px-8 overflow-x-auto tab-scroll" style="height:3.25rem; background:rgba(37,45,63,0.75); border-bottom:1px solid rgba(255,255,255,0.08);" role="tablist" aria-label="Main navigation">
        <button data-tab="control" class="tab-btn active touch-target relative h-full px-3 sm:px-4 whitespace-nowrap" style="color:#ffb84d;" role="tab" aria-selected="true" aria-controls="tab-control" id="tab-btn-control">
          <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.875rem; letter-spacing:0.04em;">Control</span>
        </button>
        <button data-tab="shows" class="tab-btn touch-target relative h-full px-3 sm:px-4 whitespace-nowrap" style="color:#8b95a5;" role="tab" aria-selected="false" aria-controls="tab-shows" id="tab-btn-shows">
          <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.875rem; letter-spacing:0.04em;">Shows</span>
        </button>
        <button data-tab="effects" class="tab-btn touch-target relative h-full px-3 sm:px-4 whitespace-nowrap" style="color:#8b95a5;" role="tab" aria-selected="false" aria-controls="tab-effects" id="tab-btn-effects">
          <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.875rem; letter-spacing:0.04em;">Effects</span>
        </button>
        <button data-tab="system" class="tab-btn touch-target relative h-full px-3 sm:px-4 whitespace-nowrap" style="color:#8b95a5;" role="tab" aria-selected="false" aria-controls="tab-system" id="tab-btn-system">
          <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.875rem; letter-spacing:0.04em;">System</span>
        </button>
        <!-- Sliding Underline -->
        <div id="tabUnderline" class="tab-underline absolute bottom-0" style="height:2px; background:#ffb84d; border-radius:1px; left:16px; width:60px;"></div>
      </nav>

      <!-- Tab: Control + Zones -->
      <div id="tab-control" class="tab-content active p-4 sm:p-5 lg:p-6 xl:p-8" role="tabpanel" aria-labelledby="tab-btn-control" style="opacity:1;">
        
        <!-- Page Header -->
        <div class="flex flex-col gap-2 lg:flex-row lg:items-end lg:justify-between mb-5">
          <div>
            <h1 class="uppercase tracking-tight" style="font-family:'Bebas Neue', sans-serif; font-size:1.5rem; letter-spacing:0.01em;">Control + Zones</h1>
            <p class="flex flex-wrap items-center gap-2 mt-1" style="font-size:0.75rem; color:#8b95a5;">
              <span>Center-radiating effects</span>
              <span style="width:3px; height:3px; border-radius:50%; background:#8b95a5;"></span>
              <span>Live: <span style="color:#22dd88;">120 FPS</span></span>
            </p>
          </div>
        </div>

        <!-- LGP Visualizer -->
        <div class="card-hover rounded-xl p-3 sm:p-4 mb-5" style="background:#141820; border:1px solid rgba(255,255,255,0.08);">
          <div class="flex items-center justify-between mb-3">
            <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.75rem; color:#8b95a5; letter-spacing:0.06em;">LGP Strip Visualizer</span>
            <span class="hidden sm:inline" style="font-size:0.625rem; color:#6ee7f3;">160 LEDs × 2 (Mirrored)</span>
          </div>
          <div class="relative rounded-lg overflow-hidden" style="background:#0a0d12;">
            <!-- Loading skeleton -->
            <div id="lgpSkeleton" class="hidden w-full flex items-end justify-center gap-0.5 p-4" style="height:6rem;">
              <div class="shimmer rounded" style="width:2px; height:30%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:45%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:60%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:75%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:90%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:100%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:90%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:75%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:60%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:45%; background:rgba(255,255,255,0.1);"></div>
              <div class="shimmer rounded" style="width:2px; height:30%; background:rgba(255,255,255,0.1);"></div>
            </div>
            <canvas id="lgpCanvas" class="w-full" style="height:6rem;"></canvas>
            <div class="absolute top-2 left-1/2 -translate-x-1/2 rounded px-2 py-1" style="background:rgba(110,231,243,0.12); border:1px solid rgba(110,231,243,0.3);">
              <span class="uppercase" style="font-family:'Bebas Neue', sans-serif; font-size:0.625rem; color:#6ee7f3; letter-spacing:0.08em;">CENTER</span>
            </div>
          </div>
        </div>

        <!-- Main Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          
          <!-- Global Controls -->
          <div class="card-hover rounded-xl p-4 sm:p-5" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10); box-shadow:0 1px 0 rgba(255,255,255,0.08) inset, 0 12px 32px rgba(0,0,0,0.25);">
            <div class="flex items-center justify-between mb-4">
              <span class="uppercase tracking-tight" style="font-family:'Bebas Neue', sans-serif; font-size:0.9375rem; letter-spacing:0.02em;">Global Controls</span>
              <span class="rounded-lg px-2 py-1" style="background:rgba(47,56,73,0.65); border:1px solid rgba(255,255,255,0.08); font-size:0.5625rem; color:#8b95a5;">Strip A/B</span>
            </div>

            <!-- Brightness -->
            <div class="space-y-2 mb-4">
              <div class="flex items-center justify-between">
                <label id="labelBrightness" style="font-size:0.6875rem; font-weight:500;">Brightness</label>
                <span id="valBrightness" style="font-size:0.75rem;">192</span>
              </div>
              <div class="slider-container relative h-8">
                <div class="absolute inset-x-0 top-1/2 -translate-y-1/2 h-1 rounded-full" style="background:#2f3849;"></div>
                <div id="fillBrightness" class="absolute left-0 top-1/2 -translate-y-1/2 h-1 rounded-full" style="background:linear-gradient(90deg, #ffb84d, #f59e0b); width:75%;"></div>
                <input id="sliderBrightness" type="range" min="0" max="255" value="192" class="absolute inset-0 w-full opacity-0 cursor-pointer" aria-labelledby="labelBrightness" aria-valuenow="192" aria-valuemin="0" aria-valuemax="255">
                <div id="thumbBrightness" class="slider-thumb pointer-events-none absolute top-1/2 -translate-y-1/2 rounded-full" style="width:1.125rem; height:1.125rem; left:calc(75% - 0.5625rem); background:#ffb84d; border:2px solid rgba(255,255,255,0.2); box-shadow:0 2px 8px rgba(0,0,0,0.4);"></div>
              </div>
            </div>

            <!-- Speed -->
            <div class="space-y-2 mb-4">
              <div class="flex items-center justify-between">
                <label id="labelSpeed" style="font-size:0.6875rem; font-weight:500;">Speed</label>
                <span id="valSpeed" style="font-size:0.75rem;">18</span>
              </div>
              <div class="slider-container relative h-8">
                <div class="absolute inset-x-0 top-1/2 -translate-y-1/2 h-1 rounded-full" style="background:#2f3849;"></div>
                <div id="fillSpeed" class="absolute left-0 top-1/2 -translate-y-1/2 h-1 rounded-full" style="background:linear-gradient(90deg, #ffb84d, #f59e0b); width:35%;"></div>
                <input id="sliderSpeed" type="range" min="1" max="50" value="18" class="absolute inset-0 w-full opacity-0 cursor-pointer" aria-labelledby="labelSpeed" aria-valuenow="18" aria-valuemin="1" aria-valuemax="50">
                <div id="thumbSpeed" class="slider-thumb pointer-events-none absolute top-1/2 -translate-y-1/2 rounded-full" style="width:1.125rem; height:1.125rem; left:calc(35% - 0.5625rem); background:#ffb84d; border:2px solid rgba(255,255,255,0.2); box-shadow:0 2px 8px rgba(0,0,0,0.4);"></div>
              </div>
            </div>

            <!-- Palette Dropdown -->
            <div class="space-y-2 mb-4">
              <label style="font-size:0.6875rem; font-weight:500;">Palette</label>
              <div class="relative">
                <button id="paletteBtn" class="w-full flex items-center justify-between rounded-lg px-3 btn-secondary" style="height:2.5rem; background:#2f3849; border:1px solid rgba(255,255,255,0.08);" aria-haspopup="listbox" aria-expanded="false">
                  <span id="paletteVal" style="font-size:0.75rem;">Aurora Glass</span>
                  <iconify-icon icon="lucide:chevron-down" width="14" height="14" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
                </button>
                <div id="paletteMenu" class="hidden absolute z-20 left-0 right-0 mt-2 rounded-xl p-2" style="background:#2f3849; border:1px solid rgba(255,255,255,0.10); box-shadow:0 12px 32px rgba(0,0,0,0.4);" role="listbox">
                  <button class="palette-item w-full text-left rounded-lg px-3 py-2 btn-secondary" data-palette="Aurora Glass" style="background:rgba(255,255,255,0.05); font-size:0.75rem;" role="option" aria-selected="true">Aurora Glass</button>
                  <button class="palette-item w-full text-left rounded-lg px-3 py-2 btn-secondary" data-palette="Cyan Ember" style="font-size:0.75rem; color:#8b95a5;" role="option" aria-selected="false">Cyan Ember</button>
                  <button class="palette-item w-full text-left rounded-lg px-3 py-2 btn-secondary" data-palette="Neon Ice" style="font-size:0.75rem; color:#8b95a5;" role="option" aria-selected="false">Neon Ice</button>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-2 gap-2">
              <button class="touch-target rounded-lg font-medium btn-secondary" style="height:2.5rem; background:transparent; border:1px solid #ffb84d; color:#ffb84d; font-size:0.75rem;">All Off</button>
              <button class="touch-target rounded-lg font-medium btn-primary" style="height:2.5rem; background:#ffb84d; color:#1c2130; font-size:0.75rem;">Save</button>
            </div>
          </div>

          <!-- Zone Composer -->
          <div class="card-hover rounded-xl p-4 sm:p-5" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10); box-shadow:0 1px 0 rgba(255,255,255,0.08) inset, 0 12px 32px rgba(0,0,0,0.25);">
            <div class="flex items-center justify-between mb-4">
              <span class="uppercase tracking-tight" style="font-family:'Bebas Neue', sans-serif; font-size:0.9375rem; letter-spacing:0.02em;">Zone Composer</span>
              <div class="flex items-center gap-1">
                <iconify-icon icon="lucide:target" width="14" height="14" style="color:#6ee7f3; stroke-width:1.5;"></iconify-icon>
                <span style="font-size:0.5625rem; color:#8b95a5;">Center locked</span>
              </div>
            </div>

            <!-- Zone Tabs -->
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-1 mb-4">
              <button class="zone-tab active touch-target rounded-lg px-2 py-1.5" data-zone="1" style="background:rgba(110,231,243,0.12); border:1px solid rgba(110,231,243,0.35); color:#6ee7f3;" aria-pressed="true">
                <span class="uppercase" style="font-family:'Bebas Neue', sans-serif; font-size:0.6875rem;">Z1</span>
              </button>
              <button class="zone-tab touch-target rounded-lg px-2 py-1.5" data-zone="2" style="background:transparent; border:1px solid rgba(255,255,255,0.10); color:#8b95a5;" aria-pressed="false">
                <span class="uppercase" style="font-family:'Bebas Neue', sans-serif; font-size:0.6875rem;">Z2</span>
              </button>
              <button class="zone-tab touch-target rounded-lg px-2 py-1.5" data-zone="3" style="background:transparent; border:1px solid rgba(255,255,255,0.10); color:#8b95a5;" aria-pressed="false">
                <span class="uppercase" style="font-family:'Bebas Neue', sans-serif; font-size:0.6875rem;">Z3</span>
              </button>
              <button class="zone-tab touch-target rounded-lg px-2 py-1.5 opacity-50" data-zone="4" disabled="" style="background:transparent; border:1px solid rgba(255,255,255,0.08); color:#8b95a5;" aria-pressed="false" aria-disabled="true">
                <span class="uppercase" style="font-family:'Bebas Neue', sans-serif; font-size:0.6875rem;">Z4</span>
              </button>
            </div>

            <!-- Effect & Blend -->
            <div class="grid grid-cols-2 gap-2 mb-4">
              <div class="space-y-1">
                <label style="font-size:0.625rem; font-weight:500;">Effect</label>
                <button class="w-full flex items-center justify-between rounded-lg px-2 btn-secondary" style="height:2.25rem; background:#2f3849; border:1px solid rgba(255,255,255,0.08);">
                  <span style="font-size:0.6875rem;">Center Pulse</span>
                  <iconify-icon icon="lucide:chevron-down" width="12" height="12" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
                </button>
              </div>
              <div class="space-y-1">
                <label style="font-size:0.625rem; font-weight:500;">Blend</label>
                <button class="w-full flex items-center justify-between rounded-lg px-2 btn-secondary" style="height:2.25rem; background:#2f3849; border:1px solid rgba(255,255,255,0.08);">
                  <span style="font-size:0.6875rem;">Normal</span>
                  <iconify-icon icon="lucide:chevron-down" width="12" height="12" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
                </button>
              </div>
            </div>

            <!-- Pipeline Sliders -->
            <div class="rounded-lg p-3" style="background:rgba(28,33,48,0.5); border:1px solid rgba(255,255,255,0.08);">
              <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.6875rem; color:#8b95a5;">Pipeline</span>
              
              <div class="space-y-1 mt-2">
                <div class="flex items-center justify-between">
                  <label id="labelBlur" style="font-size:0.5625rem;">Blur</label>
                  <span id="valBlur" style="font-size:0.625rem;">0.35</span>
                </div>
                <div class="slider-container relative h-6">
                  <div class="absolute inset-x-0 top-1/2 -translate-y-1/2 h-1 rounded-full" style="background:#2f3849;"></div>
                  <div id="fillBlur" class="absolute left-0 top-1/2 -translate-y-1/2 h-1 rounded-full" style="background:#6ee7f3; width:35%;"></div>
                  <input id="sliderBlur" type="range" min="0" max="100" value="35" class="absolute inset-0 w-full opacity-0 cursor-pointer" aria-labelledby="labelBlur" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100">
                  <div id="thumbBlur" class="slider-thumb pointer-events-none absolute top-1/2 -translate-y-1/2 rounded-full" style="width:0.875rem; height:0.875rem; left:calc(35% - 0.4375rem); background:#6ee7f3; border:2px solid rgba(255,255,255,0.2);"></div>
                </div>
              </div>

              <div class="space-y-1 mt-2">
                <div class="flex items-center justify-between">
                  <label id="labelGamma" style="font-size:0.5625rem;">Gamma</label>
                  <span id="valGamma" style="font-size:0.625rem;">2.20</span>
                </div>
                <div class="slider-container relative h-6">
                  <div class="absolute inset-x-0 top-1/2 -translate-y-1/2 h-1 rounded-full" style="background:#2f3849;"></div>
                  <div id="fillGamma" class="absolute left-0 top-1/2 -translate-y-1/2 h-1 rounded-full" style="background:#6ee7f3; width:55%;"></div>
                  <input id="sliderGamma" type="range" min="100" max="320" value="220" class="absolute inset-0 w-full opacity-0 cursor-pointer" aria-labelledby="labelGamma" aria-valuenow="220" aria-valuemin="100" aria-valuemax="320">
                  <div id="thumbGamma" class="slider-thumb pointer-events-none absolute top-1/2 -translate-y-1/2 rounded-full" style="width:0.875rem; height:0.875rem; left:calc(55% - 0.4375rem); background:#6ee7f3; border:2px solid rgba(255,255,255,0.2);"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Tools -->
          <div class="card-hover rounded-xl p-4 sm:p-5 md:col-span-2 lg:col-span-1" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10); box-shadow:0 1px 0 rgba(255,255,255,0.08) inset, 0 12px 32px rgba(0,0,0,0.25);">
            <div class="flex items-center justify-between mb-4">
              <span class="uppercase tracking-tight" style="font-family:'Bebas Neue', sans-serif; font-size:0.9375rem; letter-spacing:0.02em;">Quick Tools</span>
              <div class="flex items-center gap-1">
                <span class="status-pulse-connected rounded-full" style="width:0.375rem; height:0.375rem; background:#22dd88;"></span>
                <span style="font-size:0.5625rem; color:#22dd88;">120 FPS</span>
              </div>
            </div>

            <!-- Transitions -->
            <div class="rounded-lg p-3 mb-3" style="background:rgba(28,33,48,0.5); border:1px solid rgba(255,255,255,0.08);">
              <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.6875rem;">Transitions</span>
              <div class="mt-2 space-y-2">
                <button class="w-full flex items-center justify-between rounded-lg px-2 btn-secondary" style="height:2.25rem; background:#2f3849; border:1px solid rgba(255,255,255,0.08);">
                  <span style="font-size:0.6875rem;">Radial Crossfade</span>
                  <iconify-icon icon="lucide:chevron-down" width="12" height="12" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
                </button>
                <button class="w-full rounded-lg font-medium btn-primary" style="height:2.25rem; background:#ffb84d; color:#1c2130; font-size:0.6875rem;">Trigger</button>
              </div>
            </div>

            <!-- Recent Effects -->
            <div class="rounded-lg p-3" style="background:rgba(28,33,48,0.5); border:1px solid rgba(255,255,255,0.08);">
              <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.6875rem;">Recent</span>
              <div class="mt-2 space-y-1">
                <button class="effect-list-item w-full flex items-center justify-between rounded-lg px-2 py-1.5" style="background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08);">
                  <span style="font-size:0.6875rem;">Center Pulse</span>
                  <iconify-icon icon="lucide:star" width="12" height="12" class="star-icon" style="color:#ffb84d; stroke-width:1.5;" aria-label="Favorited"></iconify-icon>
                </button>
                <button class="effect-list-item w-full flex items-center justify-between rounded-lg px-2 py-1.5" style="background:transparent; border:1px solid rgba(255,255,255,0.06);" aria-label="Add Wavefront Bloom to favorites">
                  <span style="font-size:0.6875rem; color:#8b95a5;">Wavefront Bloom</span>
                  <iconify-icon icon="lucide:star" width="12" height="12" class="star-icon" style="color:#717182; stroke-width:1.5;"></iconify-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Shows (Timeline) -->
      <div id="tab-shows" class="tab-content hidden p-4 sm:p-5 lg:p-6 xl:p-8" role="tabpanel" aria-labelledby="tab-btn-shows">
        <div class="flex flex-col gap-2 lg:flex-row lg:items-end lg:justify-between mb-5">
          <div>
            <h1 class="uppercase tracking-tight" style="font-family:'Bebas Neue', sans-serif; font-size:1.5rem;">Timeline Editor</h1>
            <p style="font-size:0.75rem; color:#8b95a5; margin-top:0.25rem;">Build center-radiating show sequences • Drag scenes to reorder</p>
          </div>
          <div class="flex items-center gap-2">
            <button class="touch-target rounded-lg px-3 font-medium btn-secondary flex items-center" style="height:2.25rem; border:1px solid rgba(255,255,255,0.10); font-size:0.6875rem; color:#8b95a5;" aria-label="Add new scene">
              <iconify-icon icon="lucide:plus" width="14" height="14" style="stroke-width:1.5;" class="mr-1"></iconify-icon>
              <span class="hidden sm:inline">Add Scene</span>
            </button>
            <button class="touch-target rounded-lg px-3 font-medium btn-primary flex items-center" style="height:2.25rem; background:#ffb84d; color:#1c2130; font-size:0.6875rem;" aria-label="Preview show">
              <iconify-icon icon="lucide:play" width="14" height="14" style="stroke-width:1.5;" class="mr-1"></iconify-icon>
              Preview
            </button>
          </div>
        </div>

        <!-- Timeline Container -->
        <div class="card-hover rounded-xl p-4 sm:p-5" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
          
          <!-- Timeline Header -->
          <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-4">
            <div class="flex items-center gap-3">
              <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.8125rem;">Show: Aurora Sequence</span>
              <span class="rounded px-2 py-0.5" style="background:rgba(34,221,136,0.12); border:1px solid rgba(34,221,136,0.3); font-size:0.5625rem; color:#22dd88;">SAVED</span>
            </div>
            <div class="flex items-center gap-2">
              <span style="font-size:0.625rem; color:#8b95a5;">Duration:</span>
              <span style="font-size:0.6875rem; color:#e6e9ef;">2:45</span>
            </div>
          </div>

          <!-- Time Ruler -->
          <div class="relative mb-2" style="height:1.5rem; background:rgba(28,33,48,0.5); border-radius:0.375rem;">
            <div class="absolute inset-x-4 top-0 bottom-0 flex justify-between items-center">
              <span style="font-size:0.5rem; color:#717182;">0:00</span>
              <span class="hidden sm:inline" style="font-size:0.5rem; color:#717182;">0:30</span>
              <span style="font-size:0.5rem; color:#717182;">1:00</span>
              <span class="hidden sm:inline" style="font-size:0.5rem; color:#717182;">1:30</span>
              <span style="font-size:0.5rem; color:#717182;">2:00</span>
              <span class="hidden md:inline" style="font-size:0.5rem; color:#717182;">2:30</span>
            </div>
            <!-- Playhead -->
            <div id="playhead" class="absolute top-0 bottom-0 w-0.5 rounded-full" style="left:15%; background:#ffb84d; box-shadow:0 0 8px rgba(255,184,77,0.5);"></div>
          </div>

          <!-- Timeline Tracks -->
          <div id="timelineContainer" class="space-y-2">
            
            <!-- Track 1: Zone 1 -->
            <div class="relative rounded-lg p-2" style="background:rgba(28,33,48,0.5); border:1px solid rgba(255,255,255,0.08); min-height:3rem;">
              <div class="absolute left-2 top-1/2 -translate-y-1/2 hidden sm:block" style="font-size:0.5rem; color:#6ee7f3; writing-mode:vertical-rl; transform:rotate(180deg) translateY(50%);">ZONE 1</div>
              <div class="sm:ml-6 relative flex items-center gap-1" style="height:2rem;">
                <!-- Scene Blocks -->
                <div class="scene-block absolute rounded-lg flex items-center justify-center" data-scene="1" style="left:5%; width:25%; height:100%; background:linear-gradient(135deg, rgba(110,231,243,0.3), rgba(110,231,243,0.15)); border:1px solid rgba(110,231,243,0.4);">
                  <span class="truncate px-1" style="font-size:0.5rem; color:#6ee7f3;">Center Pulse</span>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:10%; width:0.4rem; height:0.4rem; background:#ffb84d; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:50%; width:0.4rem; height:0.4rem; background:#ffb84d; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:90%; width:0.4rem; height:0.4rem; background:#ffb84d; transform:rotate(45deg);"></div>
                </div>
                <div class="scene-block absolute rounded-lg flex items-center justify-center" data-scene="2" style="left:32%; width:20%; height:100%; background:linear-gradient(135deg, rgba(34,221,136,0.3), rgba(34,221,136,0.15)); border:1px solid rgba(34,221,136,0.4);">
                  <span class="truncate px-1" style="font-size:0.5rem; color:#22dd88;">Wavefront</span>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:20%; width:0.4rem; height:0.4rem; background:#ffb84d; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:80%; width:0.4rem; height:0.4rem; background:#ffb84d; transform:rotate(45deg);"></div>
                </div>
                <div class="scene-block absolute rounded-lg flex items-center justify-center" data-scene="3" style="left:55%; width:30%; height:100%; background:linear-gradient(135deg, rgba(255,184,77,0.3), rgba(255,184,77,0.15)); border:1px solid rgba(255,184,77,0.4);">
                  <span class="truncate px-1" style="font-size:0.5rem; color:#ffb84d;">Aurora Sweep</span>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:15%; width:0.4rem; height:0.4rem; background:#6ee7f3; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:50%; width:0.4rem; height:0.4rem; background:#6ee7f3; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:85%; width:0.4rem; height:0.4rem; background:#6ee7f3; transform:rotate(45deg);"></div>
                </div>
              </div>
            </div>

            <!-- Track 2: Zone 2 -->
            <div class="relative rounded-lg p-2" style="background:rgba(28,33,48,0.5); border:1px solid rgba(255,255,255,0.08); min-height:3rem;">
              <div class="absolute left-2 top-1/2 -translate-y-1/2 hidden sm:block" style="font-size:0.5rem; color:#22dd88; writing-mode:vertical-rl; transform:rotate(180deg) translateY(50%);">ZONE 2</div>
              <div class="sm:ml-6 relative flex items-center gap-1" style="height:2rem;">
                <div class="scene-block absolute rounded-lg flex items-center justify-center" data-scene="4" style="left:10%; width:35%; height:100%; background:linear-gradient(135deg, rgba(181,189,202,0.3), rgba(181,189,202,0.15)); border:1px solid rgba(181,189,202,0.4);">
                  <span class="truncate px-1" style="font-size:0.5rem; color:#b5bdc9;">Ambient Glow</span>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:25%; width:0.4rem; height:0.4rem; background:#ffb84d; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:75%; width:0.4rem; height:0.4rem; background:#ffb84d; transform:rotate(45deg);"></div>
                </div>
                <div class="scene-block absolute rounded-lg flex items-center justify-center" data-scene="5" style="left:48%; width:40%; height:100%; background:linear-gradient(135deg, rgba(110,231,243,0.3), rgba(110,231,243,0.15)); border:1px solid rgba(110,231,243,0.4);">
                  <span class="truncate px-1" style="font-size:0.5rem; color:#6ee7f3;">Ripple Out</span>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:33%; width:0.4rem; height:0.4rem; background:#22dd88; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:66%; width:0.4rem; height:0.4rem; background:#22dd88; transform:rotate(45deg);"></div>
                </div>
              </div>
            </div>

            <!-- Track 3: Global -->
            <div class="relative rounded-lg p-2" style="background:rgba(28,33,48,0.5); border:1px solid rgba(255,255,255,0.08); min-height:3rem;">
              <div class="absolute left-2 top-1/2 -translate-y-1/2 hidden sm:block" style="font-size:0.5rem; color:#ffb84d; writing-mode:vertical-rl; transform:rotate(180deg) translateY(50%);">GLOBAL</div>
              <div class="sm:ml-6 relative flex items-center gap-1" style="height:2rem;">
                <div class="scene-block absolute rounded-lg flex items-center justify-center" data-scene="6" style="left:0%; width:88%; height:100%; background:linear-gradient(135deg, rgba(255,184,77,0.2), rgba(255,184,77,0.08)); border:1px solid rgba(255,184,77,0.3);">
                  <span class="truncate px-1" style="font-size:0.5rem; color:#ffb84d;">Brightness Envelope</span>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:5%; width:0.4rem; height:0.4rem; background:#6ee7f3; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:30%; width:0.4rem; height:0.4rem; background:#6ee7f3; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:60%; width:0.4rem; height:0.4rem; background:#6ee7f3; transform:rotate(45deg);"></div>
                  <div class="keyframe-diamond absolute -bottom-1 rounded-sm hidden sm:block" style="left:95%; width:0.4rem; height:0.4rem; background:#6ee7f3; transform:rotate(45deg);"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Transport Controls -->
          <div class="flex items-center justify-center gap-2 mt-4 pt-4" style="border-top:1px solid rgba(255,255,255,0.08);">
            <button class="touch-target grid place-items-center rounded-lg btn-secondary" style="width:2.5rem; height:2.5rem; border:1px solid rgba(255,255,255,0.10);" aria-label="Previous scene">
              <iconify-icon icon="lucide:skip-back" width="16" height="16" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
            </button>
            <button class="touch-target grid place-items-center rounded-lg btn-primary" style="width:3rem; height:3rem; background:#ffb84d;" aria-label="Play show">
              <iconify-icon icon="lucide:play" width="20" height="20" style="color:#1c2130; stroke-width:1.5;"></iconify-icon>
            </button>
            <button class="touch-target grid place-items-center rounded-lg btn-secondary" style="width:2.5rem; height:2.5rem; border:1px solid rgba(255,255,255,0.10);" aria-label="Next scene">
              <iconify-icon icon="lucide:skip-forward" width="16" height="16" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
            </button>
            <div class="w-px h-6 mx-2" style="background:rgba(255,255,255,0.1);"></div>
            <button class="touch-target grid place-items-center rounded-lg btn-secondary" style="width:2.5rem; height:2.5rem; border:1px solid rgba(255,255,255,0.10);" aria-label="Toggle loop" aria-pressed="false">
              <iconify-icon icon="lucide:repeat" width="16" height="16" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
            </button>
          </div>
        </div>
      </div>

      <!-- Tab: Effects Browser -->
      <div id="tab-effects" class="tab-content hidden p-4 sm:p-5 lg:p-6 xl:p-8" role="tabpanel" aria-labelledby="tab-btn-effects">
        <div class="flex flex-col gap-2 lg:flex-row lg:items-end lg:justify-between mb-5">
          <div>
            <h1 class="uppercase tracking-tight" style="font-family:'Bebas Neue', sans-serif; font-size:1.5rem;">Effects Browser</h1>
            <p style="font-size:0.75rem; color:#8b95a5; margin-top:0.25rem;">Browse, preview, and pin center-radiating effects</p>
          </div>
          <div class="flex items-center gap-2">
            <div class="relative">
              <input type="text" placeholder="Search effects..." class="rounded-lg pl-8 pr-3 focus:outline-none w-40 sm:w-48" style="height:2.25rem; background:#2f3849; border:1px solid rgba(255,255,255,0.08); font-size:0.6875rem; color:#e6e9ef;" aria-label="Search effects">
              <iconify-icon icon="lucide:search" width="14" height="14" class="absolute left-2.5 top-1/2 -translate-y-1/2" style="color:#8b95a5; stroke-width:1.5;"></iconify-icon>
            </div>
          </div>
        </div>

        <!-- Filter Tags -->
        <div class="flex flex-wrap items-center gap-2 mb-5" role="group" aria-label="Effect filters">
          <button class="rounded-full px-3 py-1 btn-secondary" style="background:rgba(255,184,77,0.15); border:1px solid rgba(255,184,77,0.4); font-size:0.625rem; color:#ffb84d;" aria-pressed="true">All</button>
          <button class="rounded-full px-3 py-1 btn-secondary" style="background:transparent; border:1px solid rgba(255,255,255,0.10); font-size:0.625rem; color:#8b95a5;" aria-pressed="false">Pulse</button>
          <button class="rounded-full px-3 py-1 btn-secondary" style="background:transparent; border:1px solid rgba(255,255,255,0.10); font-size:0.625rem; color:#8b95a5;" aria-pressed="false">Wave</button>
          <button class="rounded-full px-3 py-1 btn-secondary" style="background:transparent; border:1px solid rgba(255,255,255,0.10); font-size:0.625rem; color:#8b95a5;" aria-pressed="false">Ripple</button>
          <button class="rounded-full px-3 py-1 btn-secondary" style="background:transparent; border:1px solid rgba(255,255,255,0.10); font-size:0.625rem; color:#8b95a5;" aria-pressed="false">Bloom</button>
          <button class="rounded-full px-3 py-1 btn-secondary" style="background:transparent; border:1px solid rgba(255,255,255,0.10); font-size:0.625rem; color:#8b95a5;" aria-pressed="false">Ambient</button>
        </div>

        <!-- Loading Skeleton for Effects -->
        <div id="effectsSkeleton" class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3">
          <div class="rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="shimmer rounded-lg mb-3" style="height:5rem;"></div>
            <div class="shimmer rounded h-4 mb-2" style="width:70%;"></div>
            <div class="shimmer rounded h-3" style="width:50%;"></div>
          </div>
          <div class="rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="shimmer rounded-lg mb-3" style="height:5rem;"></div>
            <div class="shimmer rounded h-4 mb-2" style="width:60%;"></div>
            <div class="shimmer rounded h-3" style="width:45%;"></div>
          </div>
          <div class="rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="shimmer rounded-lg mb-3" style="height:5rem;"></div>
            <div class="shimmer rounded h-4 mb-2" style="width:75%;"></div>
            <div class="shimmer rounded h-3" style="width:55%;"></div>
          </div>
        </div>

        <!-- Effects Grid -->
        <div id="effectsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3">
          
          <!-- Effect Card 1 -->
          <div class="effect-card rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="relative rounded-lg overflow-hidden mb-3" style="height:5rem; background:linear-gradient(135deg, rgba(110,231,243,0.2), rgba(34,221,136,0.1));">
              <div class="shimmer absolute inset-0"></div>
              <button class="absolute top-2 right-2 touch-target grid place-items-center" aria-label="Remove from favorites" aria-pressed="true">
                <iconify-icon icon="lucide:star" width="14" height="14" style="color:#ffb84d; stroke-width:1.5;"></iconify-icon>
              </button>
              <div class="absolute bottom-2 left-2 rounded px-1.5 py-0.5" style="background:rgba(0,0,0,0.5); font-size:0.5rem; color:#6ee7f3;">CENTER</div>
            </div>
            <div class="flex items-start justify-between">
              <div>
                <div style="font-size:0.75rem; font-weight:500;">Center Pulse</div>
                <div style="font-size:0.5625rem; color:#8b95a5;">Radiates from center outward</div>
              </div>
              <button class="touch-target rounded-lg grid place-items-center btn-secondary" style="width:1.75rem; height:1.75rem; background:rgba(255,255,255,0.05);" aria-label="Play Center Pulse effect">
                <iconify-icon icon="lucide:play" width="12" height="12" style="color:#e6e9ef; stroke-width:1.5;"></iconify-icon>
              </button>
            </div>
          </div>

          <!-- Effect Card 2 -->
          <div class="effect-card rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="relative rounded-lg overflow-hidden mb-3" style="height:5rem; background:linear-gradient(135deg, rgba(34,221,136,0.2), rgba(110,231,243,0.1));">
              <div class="shimmer absolute inset-0"></div>
              <button class="absolute top-2 right-2 touch-target grid place-items-center" aria-label="Add to favorites" aria-pressed="false">
                <iconify-icon icon="lucide:star" width="14" height="14" style="color:#717182; stroke-width:1.5;"></iconify-icon>
              </button>
              <div class="absolute bottom-2 left-2 rounded px-1.5 py-0.5" style="background:rgba(0,0,0,0.5); font-size:0.5rem; color:#22dd88;">WAVE</div>
            </div>
            <div class="flex items-start justify-between">
              <div>
                <div style="font-size:0.75rem; font-weight:500;">Wavefront Bloom</div>
                <div style="font-size:0.5625rem; color:#8b95a5;">Expanding wave with bloom</div>
              </div>
              <button class="touch-target rounded-lg grid place-items-center btn-secondary" style="width:1.75rem; height:1.75rem; background:rgba(255,255,255,0.05);" aria-label="Play Wavefront Bloom effect">
                <iconify-icon icon="lucide:play" width="12" height="12" style="color:#e6e9ef; stroke-width:1.5;"></iconify-icon>
              </button>
            </div>
          </div>

          <!-- Effect Card 3 -->
          <div class="effect-card rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="relative rounded-lg overflow-hidden mb-3" style="height:5rem; background:linear-gradient(135deg, rgba(255,184,77,0.2), rgba(239,68,68,0.1));">
              <div class="shimmer absolute inset-0"></div>
              <button class="absolute top-2 right-2 touch-target grid place-items-center" aria-label="Add to favorites" aria-pressed="false">
                <iconify-icon icon="lucide:star" width="14" height="14" style="color:#717182; stroke-width:1.5;"></iconify-icon>
              </button>
              <div class="absolute bottom-2 left-2 rounded px-1.5 py-0.5" style="background:rgba(0,0,0,0.5); font-size:0.5rem; color:#ffb84d;">RIPPLE</div>
            </div>
            <div class="flex items-start justify-between">
              <div>
                <div style="font-size:0.75rem; font-weight:500;">Quantum Ripples</div>
                <div style="font-size:0.5625rem; color:#8b95a5;">Multiple interference patterns</div>
              </div>
              <button class="touch-target rounded-lg grid place-items-center btn-secondary" style="width:1.75rem; height:1.75rem; background:rgba(255,255,255,0.05);" aria-label="Play Quantum Ripples effect">
                <iconify-icon icon="lucide:play" width="12" height="12" style="color:#e6e9ef; stroke-width:1.5;"></iconify-icon>
              </button>
            </div>
          </div>

          <!-- Effect Card 4 -->
          <div class="effect-card rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="relative rounded-lg overflow-hidden mb-3" style="height:5rem; background:linear-gradient(135deg, rgba(181,189,202,0.2), rgba(110,231,243,0.1));">
              <div class="shimmer absolute inset-0"></div>
              <button class="absolute top-2 right-2 touch-target grid place-items-center" aria-label="Add to favorites" aria-pressed="false">
                <iconify-icon icon="lucide:star" width="14" height="14" style="color:#717182; stroke-width:1.5;"></iconify-icon>
              </button>
              <div class="absolute bottom-2 left-2 rounded px-1.5 py-0.5" style="background:rgba(0,0,0,0.5); font-size:0.5rem; color:#b5bdc9;">AMBIENT</div>
            </div>
            <div class="flex items-start justify-between">
              <div>
                <div style="font-size:0.75rem; font-weight:500;">Photon Smoke</div>
                <div style="font-size:0.5625rem; color:#8b95a5;">Soft ambient diffusion</div>
              </div>
              <button class="touch-target rounded-lg grid place-items-center btn-secondary" style="width:1.75rem; height:1.75rem; background:rgba(255,255,255,0.05);" aria-label="Play Photon Smoke effect">
                <iconify-icon icon="lucide:play" width="12" height="12" style="color:#e6e9ef; stroke-width:1.5;"></iconify-icon>
              </button>
            </div>
          </div>

          <!-- Effect Card 5 -->
          <div class="effect-card rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="relative rounded-lg overflow-hidden mb-3" style="height:5rem; background:linear-gradient(135deg, rgba(110,231,243,0.25), rgba(255,184,77,0.1));">
              <div class="shimmer absolute inset-0"></div>
              <button class="absolute top-2 right-2 touch-target grid place-items-center" aria-label="Remove from favorites" aria-pressed="true">
                <iconify-icon icon="lucide:star" width="14" height="14" style="color:#ffb84d; stroke-width:1.5;"></iconify-icon>
              </button>
              <div class="absolute bottom-2 left-2 rounded px-1.5 py-0.5" style="background:rgba(0,0,0,0.5); font-size:0.5rem; color:#6ee7f3;">BLOOM</div>
            </div>
            <div class="flex items-start justify-between">
              <div>
                <div style="font-size:0.75rem; font-weight:500;">Aurora Sweep</div>
                <div style="font-size:0.5625rem; color:#8b95a5;">Sweeping aurora effect</div>
              </div>
              <button class="touch-target rounded-lg grid place-items-center btn-secondary" style="width:1.75rem; height:1.75rem; background:rgba(255,255,255,0.05);" aria-label="Play Aurora Sweep effect">
                <iconify-icon icon="lucide:play" width="12" height="12" style="color:#e6e9ef; stroke-width:1.5;"></iconify-icon>
              </button>
            </div>
          </div>

          <!-- Effect Card 6 -->
          <div class="effect-card rounded-xl p-3" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="relative rounded-lg overflow-hidden mb-3" style="height:5rem; background:linear-gradient(135deg, rgba(239,68,68,0.2), rgba(255,184,77,0.1));">
              <div class="shimmer absolute inset-0"></div>
              <button class="absolute top-2 right-2 touch-target grid place-items-center" aria-label="Add to favorites" aria-pressed="false">
                <iconify-icon icon="lucide:star" width="14" height="14" style="color:#717182; stroke-width:1.5;"></iconify-icon>
              </button>
              <div class="absolute bottom-2 left-2 rounded px-1.5 py-0.5" style="background:rgba(0,0,0,0.5); font-size:0.5rem; color:#ef4444;">PULSE</div>
            </div>
            <div class="flex items-start justify-between">
              <div>
                <div style="font-size:0.75rem; font-weight:500;">Fire Breath</div>
                <div style="font-size:0.5625rem; color:#8b95a5;">Intense center burst</div>
              </div>
              <button class="touch-target rounded-lg grid place-items-center btn-secondary" style="width:1.75rem; height:1.75rem; background:rgba(255,255,255,0.05);" aria-label="Play Fire Breath effect">
                <iconify-icon icon="lucide:play" width="12" height="12" style="color:#e6e9ef; stroke-width:1.5;"></iconify-icon>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: System Diagnostics -->
      <div id="tab-system" class="tab-content hidden p-4 sm:p-5 lg:p-6 xl:p-8" role="tabpanel" aria-labelledby="tab-btn-system">
        <div class="flex flex-col gap-2 lg:flex-row lg:items-end lg:justify-between mb-5">
          <div>
            <h1 class="uppercase tracking-tight" style="font-family:'Bebas Neue', sans-serif; font-size:1.5rem;">System Diagnostics</h1>
            <p style="font-size:0.75rem; color:#8b95a5; margin-top:0.25rem;">Real-time telemetry • Device configuration • Safety limits</p>
          </div>
          <div class="flex items-center gap-2">
            <span class="status-pulse-connected rounded-full" style="width:0.5rem; height:0.5rem; background:#22dd88;"></span>
            <span style="font-size:0.6875rem; color:#22dd88;">All Systems Nominal</span>
          </div>
        </div>

        <!-- Loading Skeleton for Metrics -->
        <div id="metricsSkeleton" class="hidden grid grid-cols-1 sm:grid-cols-2 gap-3 mb-5">
          <div class="rounded-xl p-4" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="flex items-center gap-2 mb-3">
              <div class="shimmer rounded-lg" style="width:2rem; height:2rem;"></div>
              <div class="shimmer rounded h-4" style="width:5rem;"></div>
            </div>
            <div class="shimmer rounded h-8 mb-2" style="width:4rem;"></div>
            <div class="shimmer rounded h-3" style="width:6rem;"></div>
          </div>
          <div class="rounded-xl p-4" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="flex items-center gap-2 mb-3">
              <div class="shimmer rounded-lg" style="width:2rem; height:2rem;"></div>
              <div class="shimmer rounded h-4" style="width:5rem;"></div>
            </div>
            <div class="shimmer rounded h-8 mb-2" style="width:4rem;"></div>
            <div class="shimmer rounded h-3" style="width:6rem;"></div>
          </div>
        </div>

        <!-- Telemetry Grid 2x2 -->
        <div id="metricsGrid" class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-5">
          
          <!-- FPS Telemetry -->
          <div class="card-hover rounded-xl p-4" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-2">
                <div class="grid place-items-center rounded-lg" style="width:2rem; height:2rem; background:rgba(110,231,243,0.12); border:1px solid rgba(110,231,243,0.3);">
                  <iconify-icon icon="lucide:activity" width="14" height="14" style="color:#6ee7f3; stroke-width:1.5;"></iconify-icon>
                </div>
                <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.75rem;">Frame Rate</span>
              </div>
              <span class="rounded px-1.5 py-0.5" style="background:rgba(34,221,136,0.12); border:1px solid rgba(34,221,136,0.3); font-size:0.5rem; color:#22dd88;">OPTIMAL</span>
            </div>
            <div class="flex items-end justify-between">
              <div>
                <div class="telemetry-value" id="telemetryFPS" style="font-size:2rem; font-weight:600; color:#6ee7f3; line-height:1;">120</div>
                <div style="font-size:0.5625rem; color:#8b95a5;">FPS • Target: 120</div>
              </div>
              <div class="w-20 sm:w-24 h-8">
                <canvas id="fpsGraph" class="w-full h-full"></canvas>
              </div>
            </div>
          </div>

          <!-- CPU Telemetry -->
          <div class="card-hover rounded-xl p-4" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-2">
                <div class="grid place-items-center rounded-lg" style="width:2rem; height:2rem; background:rgba(34,221,136,0.12); border:1px solid rgba(34,221,136,0.3);">
                  <iconify-icon icon="lucide:cpu" width="14" height="14" style="color:#22dd88; stroke-width:1.5;"></iconify-icon>
                </div>
                <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.75rem;">CPU Usage</span>
              </div>
              <span class="rounded px-1.5 py-0.5" style="background:rgba(34,221,136,0.12); border:1px solid rgba(34,221,136,0.3); font-size:0.5rem; color:#22dd88;">LOW</span>
            </div>
            <div class="flex items-end justify-between">
              <div>
                <div class="telemetry-value" id="telemetryCPU" style="font-size:2rem; font-weight:600; color:#22dd88; line-height:1;">12<span style="font-size:1rem;">%</span></div>
                <div style="font-size:0.5625rem; color:#8b95a5;">ESP32 Core 0</div>
              </div>
              <div class="w-20 sm:w-24 h-8">
                <canvas id="cpuGraph" class="w-full h-full"></canvas>
              </div>
            </div>
          </div>

          <!-- RAM Telemetry -->
          <div class="card-hover rounded-xl p-4" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-2">
                <div class="grid place-items-center rounded-lg" style="width:2rem; height:2rem; background:rgba(255,184,77,0.12); border:1px solid rgba(255,184,77,0.3);">
                  <iconify-icon icon="lucide:hard-drive" width="14" height="14" style="color:#ffb84d; stroke-width:1.5;"></iconify-icon>
                </div>
                <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.75rem;">Memory</span>
              </div>
              <span class="rounded px-1.5 py-0.5" style="background:rgba(255,184,77,0.12); border:1px solid rgba(255,184,77,0.3); font-size:0.5rem; color:#ffb84d;">MODERATE</span>
            </div>
            <div class="flex items-end justify-between">
              <div>
                <div class="telemetry-value" id="telemetryRAM" style="font-size:2rem; font-weight:600; color:#ffb84d; line-height:1;">156<span style="font-size:0.875rem;">KB</span></div>
                <div style="font-size:0.5625rem; color:#8b95a5;">of 320KB • 48.8%</div>
              </div>
              <div class="w-20 sm:w-24 h-8">
                <canvas id="ramGraph" class="w-full h-full"></canvas>
              </div>
            </div>
          </div>

          <!-- Network Telemetry -->
          <div class="card-hover rounded-xl p-4" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-2">
                <div class="grid place-items-center rounded-lg" style="width:2rem; height:2rem; background:rgba(181,189,202,0.12); border:1px solid rgba(181,189,202,0.3);">
                  <iconify-icon icon="lucide:wifi" width="14" height="14" style="color:#b5bdc9; stroke-width:1.5;"></iconify-icon>
                </div>
                <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.75rem;">Network</span>
              </div>
              <span class="rounded px-1.5 py-0.5" style="background:rgba(34,221,136,0.12); border:1px solid rgba(34,221,136,0.3); font-size:0.5rem; color:#22dd88;">STABLE</span>
            </div>
            <div class="flex items-end justify-between">
              <div>
                <div class="telemetry-value" id="telemetryNet" style="font-size:2rem; font-weight:600; color:#b5bdc9; line-height:1;">8<span style="font-size:0.875rem;">ms</span></div>
                <div style="font-size:0.5625rem; color:#8b95a5;">Latency • WebSocket</div>
              </div>
              <div class="w-20 sm:w-24 h-8">
                <canvas id="netGraph" class="w-full h-full"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Device Info & Safety -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
          
          <!-- Device Info -->
          <div class="card-hover rounded-xl p-4" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.75rem;">Device Information</span>
            <div class="mt-3 space-y-2">
              <div class="flex justify-between py-1.5" style="border-bottom:1px solid rgba(255,255,255,0.06);">
                <span style="font-size:0.6875rem; color:#8b95a5;">Hardware</span>
                <span style="font-size:0.6875rem;">ESP32-WROOM-32</span>
              </div>
              <div class="flex justify-between py-1.5" style="border-bottom:1px solid rgba(255,255,255,0.06);">
                <span style="font-size:0.6875rem; color:#8b95a5;">Firmware</span>
                <span style="font-size:0.6875rem;">v2.4.1-stable</span>
              </div>
              <div class="flex justify-between py-1.5" style="border-bottom:1px solid rgba(255,255,255,0.06);">
                <span style="font-size:0.6875rem; color:#8b95a5;">LED Driver</span>
                <span style="font-size:0.6875rem;">WS2812B @ 800kHz</span>
              </div>
              <div class="flex justify-between py-1.5" style="border-bottom:1px solid rgba(255,255,255,0.06);">
                <span style="font-size:0.6875rem; color:#8b95a5;">Total LEDs</span>
                <span style="font-size:0.6875rem;">320 (2 × 160)</span>
              </div>
              <div class="flex justify-between py-1.5">
                <span style="font-size:0.6875rem; color:#8b95a5;">Uptime</span>
                <span style="font-size:0.6875rem; color:#22dd88;">4h 23m 15s</span>
              </div>
            </div>
          </div>

          <!-- Safety Limits -->
          <div class="card-hover rounded-xl p-4" style="background:rgba(37,45,63,0.95); border:1px solid rgba(255,255,255,0.10);">
            <span class="uppercase tracking-wide" style="font-family:'Bebas Neue', sans-serif; font-size:0.75rem;">Safety Limits</span>
            <div class="mt-3 space-y-3">
              <div>
                <div class="flex justify-between mb-1">
                  <span style="font-size:0.6875rem; color:#8b95a5;">Max Current</span>
                  <span style="font-size:0.6875rem;">2.8A / 5.0A</span>
                </div>
                <div class="h-1.5 rounded-full overflow-hidden" style="background:#2f3849;" role="progressbar" aria-valuenow="56" aria-valuemin="0" aria-valuemax="100" aria-label="Current usage 56%">
                  <div class="h-full rounded-full" style="width:56%; background:linear-gradient(90deg, #22dd88, #6ee7f3);"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between mb-1">
                  <span style="font-size:0.6875rem; color:#8b95a5;">Temperature</span>
                  <span style="font-size:0.6875rem;">42°C / 85°C</span>
                </div>
                <div class="h-1.5 rounded-full overflow-hidden" style="background:#2f3849;" role="progressbar" aria-valuenow="49" aria-valuemin="0" aria-valuemax="100" aria-label="Temperature 49%">
                  <div class="h-full rounded-full" style="width:49%; background:linear-gradient(90deg, #22dd88, #ffb84d);"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between mb-1">
                  <span style="font-size:0.6875rem; color:#8b95a5;">Duty Cycle</span>
                  <span style="font-size:0.6875rem;">72% / 100%</span>
                </div>
                <div class="h-1.5 rounded-full overflow-hidden" style="background:#2f3849;" role="progressbar" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100" aria-label="Duty cycle 72%">
                  <div class="h-full rounded-full" style="width:72%; background:linear-gradient(90deg, #6ee7f3, #ffb84d);"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </section>
  </div>

  <script>
    // === CONNECTION STATE MANAGEMENT ===
    let isConnected = true;
    const statusDot = document.getElementById('statusDot');
    const statusText = document.getElementById('statusText');
    const disconnectedBanner = document.getElementById('disconnectedBanner');
    let shakeInterval;

    function setConnectionStatus(connected) {
      isConnected = connected;
      if (connected) {
        statusDot.style.background = '#22dd88';
        statusDot.className = 'status-pulse-connected rounded-full';
        statusText.style.color = '#22dd88';
        statusText.textContent = 'CONNECTED';
        disconnectedBanner.classList.add('hidden');
        if (shakeInterval) clearInterval(shakeInterval);
      } else {
        statusDot.style.background = '#ef4444';
        statusDot.className = 'status-pulse-disconnected rounded-full';
        statusText.style.color = '#ef4444';
        statusText.textContent = 'DISCONNECTED';
        disconnectedBanner.classList.remove('hidden');
        // Add shake every 5 seconds
        shakeInterval = setInterval(() => {
          statusDot.classList.add('status-shake');
          setTimeout(() => statusDot.classList.remove('status-shake'), 300);
        }, 5000);
      }
    }

    // === TAB NAVIGATION WITH SLIDING UNDERLINE ===
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabUnderline = document.getElementById('tabUnderline');
    const tabContents = document.querySelectorAll('.tab-content');
    let activeTabIndex = 0;

    function updateUnderline(btn, animate = true) {
      const rect = btn.getBoundingClientRect();
      const navRect = btn.parentElement.getBoundingClientRect();
      const newLeft = rect.left - navRect.left;
      
      if (animate) {
        tabUnderline.style.transform = `translateX(${newLeft - parseFloat(tabUnderline.style.left || 16)}px)`;
        tabUnderline.style.width = `${rect.width}px`;
        // Reset transform after animation
        setTimeout(() => {
          tabUnderline.style.transition = 'none';
          tabUnderline.style.transform = 'translateX(0)';
          tabUnderline.style.left = `${newLeft}px`;
          setTimeout(() => {
            tabUnderline.style.transition = '';
          }, 10);
        }, 250);
      } else {
        tabUnderline.style.left = `${newLeft}px`;
        tabUnderline.style.width = `${rect.width}px`;
      }
    }

    tabBtns.forEach((btn, index) => {
      btn.addEventListener('click', () => {
        const tabName = btn.dataset.tab;
        
        // Update button states
        tabBtns.forEach((b, i) => {
          const isActive = b.dataset.tab === tabName;
          b.style.color = isActive ? '#ffb84d' : '#8b95a5';
          b.classList.toggle('active', isActive);
          b.setAttribute('aria-selected', isActive);
        });
        
        // Update tab content with fade
        tabContents.forEach(c => {
          const isActive = c.id === `tab-${tabName}`;
          if (isActive) {
            c.classList.remove('hidden');
            c.style.opacity = '0';
            requestAnimationFrame(() => {
              c.classList.add('active');
              c.style.opacity = '1';
            });
          } else {
            c.classList.remove('active');
            c.classList.add('hidden');
          }
        });
        
        // Animate underline
        updateUnderline(btn, true);
        activeTabIndex = index;
      });
    });

    // Initialize underline position
    setTimeout(() => {
      const activeTab = document.querySelector('.tab-btn.active');
      if (activeTab) updateUnderline(activeTab, false);
    }, 100);
    
    window.addEventListener('resize', () => {
      const activeTab = document.querySelector('.tab-btn.active');
      if (activeTab) updateUnderline(activeTab, false);
    });

    // === SLIDER INTERACTIONS ===
    const sliderContainers = document.querySelectorAll('.slider-container');
    sliderContainers.forEach(container => {
      const input = container.querySelector('input[type="range"]');
      const thumb = container.querySelector('.slider-thumb');
      if (input && thumb) {
        input.addEventListener('mousedown', () => thumb.classList.add('active'));
        input.addEventListener('mouseup', () => thumb.classList.remove('active'));
        input.addEventListener('touchstart', () => thumb.classList.add('active'));
        input.addEventListener('touchend', () => thumb.classList.remove('active'));
      }
    });

    // === ZONE TAB INTERACTIONS ===
    const zoneTabs = document.querySelectorAll('.zone-tab:not([disabled])');
    zoneTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        zoneTabs.forEach(t => {
          const isActive = t === tab;
          t.classList.toggle('active', isActive);
          t.setAttribute('aria-pressed', isActive);
          if (isActive) {
            t.style.background = 'rgba(110,231,243,0.12)';
            t.style.borderColor = 'rgba(110,231,243,0.35)';
            t.style.color = '#6ee7f3';
          } else {
            t.style.background = 'transparent';
            t.style.borderColor = 'rgba(255,255,255,0.10)';
            t.style.color = '#8b95a5';
          }
        });
      });
    });

    // === DRAGGABLE SCENE BLOCKS ===
    const sceneBlocks = document.querySelectorAll('.scene-block');
    let draggedBlock = null;
    let dragOffset = { x: 0, y: 0 };

    sceneBlocks.forEach(block => {
      block.addEventListener('mousedown', e => {
        draggedBlock = block;
        draggedBlock.classList.add('dragging');
        const rect = block.getBoundingClientRect();
        dragOffset.x = e.clientX - rect.left;
      });
      
      block.addEventListener('touchstart', e => {
        draggedBlock = block;
        draggedBlock.classList.add('dragging');
        const rect = block.getBoundingClientRect();
        dragOffset.x = e.touches[0].clientX - rect.left;
      }, { passive: true });
    });

    document.addEventListener('mousemove', e => {
      if (!draggedBlock) return;
      const parent = draggedBlock.parentElement;
      const parentRect = parent.getBoundingClientRect();
      let newLeft = ((e.clientX - dragOffset.x - parentRect.left) / parentRect.width) * 100;
      newLeft = Math.max(0, Math.min(newLeft, 100 - parseFloat(draggedBlock.style.width)));
      draggedBlock.style.left = `${newLeft}%`;
    });

    document.addEventListener('touchmove', e => {
      if (!draggedBlock) return;
      const parent = draggedBlock.parentElement;
      const parentRect = parent.getBoundingClientRect();
      let newLeft = ((e.touches[0].clientX - dragOffset.x - parentRect.left) / parentRect.width) * 100;
      newLeft = Math.max(0, Math.min(newLeft, 100 - parseFloat(draggedBlock.style.width)));
      draggedBlock.style.left = `${newLeft}%`;
    }, { passive: true });

    document.addEventListener('mouseup', () => {
      if (draggedBlock) {
        draggedBlock.classList.remove('dragging');
        draggedBlock = null;
      }
    });

    document.addEventListener('touchend', () => {
      if (draggedBlock) {
        draggedBlock.classList.remove('dragging');
        draggedBlock = null;
      }
    });

    // === LGP VISUALIZER ===
    const canvas = document.getElementById('lgpCanvas');
    const ctx = canvas.getContext('2d');
    let LED_COUNT = window.innerWidth < 768 ? 80 : (window.innerWidth < 1024 ? 120 : 160);
    let CENTER_INDEX = (LED_COUNT - 1) / 2;
    const palette = [
      { r: 110, g: 231, b: 243 },
      { r: 34, g: 221, b: 136 },
      { r: 255, g: 184, b: 77 },
      { r: 181, g: 189, b: 202 }
    ];
    let brightness = 192 / 255;
    let speed = 18;

    function resizeCanvas() {
      const rect = canvas.parentElement.getBoundingClientRect();
      const dpr = window.devicePixelRatio || 1;
      canvas.width = rect.width * dpr;
      canvas.height = 96 * dpr;
      ctx.scale(dpr, dpr);
      
      // Adjust LED count based on screen size
      LED_COUNT = window.innerWidth < 768 ? 80 : (window.innerWidth < 1024 ? 120 : 160);
      CENTER_INDEX = (LED_COUNT - 1) / 2;
    }

    function lerpColor(c1, c2, t) {
      return { 
        r: Math.round(c1.r + (c2.r - c1.r) * t), 
        g: Math.round(c1.g + (c2.g - c1.g) * t), 
        b: Math.round(c1.b + (c2.b - c1.b) * t) 
      };
    }

    function renderStrip(time) {
      const dpr = window.devicePixelRatio || 1;
      const width = canvas.width / dpr;
      const height = canvas.height / dpr;
      const barWidth = (width - 20) / LED_COUNT;
      const maxBarHeight = height - 20;
      const baseY = height - 8;

      const bgGradient = ctx.createRadialGradient(width / 2, height / 2, 0, width / 2, height / 2, width / 2);
      bgGradient.addColorStop(0, 'rgba(110, 231, 243, 0.06)');
      bgGradient.addColorStop(1, 'rgba(10, 13, 18, 1)');
      ctx.fillStyle = bgGradient;
      ctx.fillRect(0, 0, width, height);

      for (let i = 0; i < LED_COUNT; i++) {
        const distanceFromCenter = Math.abs(i - CENTER_INDEX) / CENTER_INDEX;
        const parabolicHeight = 1 - Math.pow(distanceFromCenter, 2);
        const wavePhase = distanceFromCenter * Math.PI * 3 - time * speed * 0.0003;
        const waveAmplitude = Math.sin(wavePhase) * 0.15 * (1 - distanceFromCenter);
        const normalizedHeight = Math.max(0.1, (parabolicHeight + waveAmplitude) * brightness);
        const barHeight = normalizedHeight * maxBarHeight;

        const colorIndex = (i / LED_COUNT * (palette.length - 1) + Math.sin(i * 0.1 + time * 0.002) * 0.5 + 0.5) % (palette.length - 1);
        const idx1 = Math.floor(colorIndex);
        const color = lerpColor(palette[idx1], palette[(idx1 + 1) % palette.length], colorIndex - idx1);
        const alpha = 0.4 + normalizedHeight * 0.6;

        const glowGradient = ctx.createLinearGradient(0, baseY, 0, baseY - barHeight);
        glowGradient.addColorStop(0, `rgba(${color.r}, ${color.g}, ${color.b}, ${alpha})`);
        glowGradient.addColorStop(1, `rgba(${color.r}, ${color.g}, ${color.b}, 0.05)`);

        ctx.fillStyle = glowGradient;
        ctx.beginPath();
        ctx.roundRect(10 + i * barWidth, baseY - barHeight, barWidth - 1, barHeight, 2);
        ctx.fill();
      }

      const centerX = 10 + CENTER_INDEX * barWidth;
      ctx.strokeStyle = 'rgba(110, 231, 243, 0.5)';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(centerX, 20);
      ctx.lineTo(centerX, height - 8);
      ctx.stroke();
    }

    function animateLGP(timestamp) {
      renderStrip(timestamp);
      requestAnimationFrame(animateLGP);
    }

    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
    requestAnimationFrame(animateLGP);

    // === TELEMETRY GRAPHS ===
    const graphData = { fps: [], cpu: [], ram: [], net: [] };
    const maxDataPoints = 30;

    function initGraph(canvasId, color) {
      const canvas = document.getElementById(canvasId);
      if (!canvas) return null;
      const ctx = canvas.getContext('2d');
      const dpr = window.devicePixelRatio || 1;
      canvas.width = canvas.offsetWidth * dpr;
      canvas.height = canvas.offsetHeight * dpr;
      return { canvas, ctx, color };
    }

    function drawGraph(graph, data) {
      if (!graph) return;
      const { canvas, ctx, color } = graph;
      const dpr = window.devicePixelRatio || 1;
      const w = canvas.width / dpr;
      const h = canvas.height / dpr;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

      if (data.length < 2) { ctx.setTransform(1, 0, 0, 1, 0, 0); return; }

      const max = Math.max(...data, 1);
      ctx.beginPath();
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.5;
      data.forEach((val, i) => {
        const x = (i / (maxDataPoints - 1)) * w;
        const y = h - (val / max) * h * 0.8;
        i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      });
      ctx.stroke();
      ctx.setTransform(1, 0, 0, 1, 0, 0);
    }

    const graphs = {
      fps: initGraph('fpsGraph', '#6ee7f3'),
      cpu: initGraph('cpuGraph', '#22dd88'),
      ram: initGraph('ramGraph', '#ffb84d'),
      net: initGraph('netGraph', '#b5bdc9')
    };

    function updateTelemetry() {
      const fps = 118 + Math.random() * 4;
      const cpu = 10 + Math.random() * 8;
      const ram = 150 + Math.random() * 20;
      const net = 6 + Math.random() * 6;

      graphData.fps.push(fps); if (graphData.fps.length > maxDataPoints) graphData.fps.shift();
      graphData.cpu.push(cpu); if (graphData.cpu.length > maxDataPoints) graphData.cpu.shift();
      graphData.ram.push(ram); if (graphData.ram.length > maxDataPoints) graphData.ram.shift();
      graphData.net.push(net); if (graphData.net.length > maxDataPoints) graphData.net.shift();

      const fpsEl = document.getElementById('telemetryFPS');
      const cpuEl = document.getElementById('telemetryCPU');
      const ramEl = document.getElementById('telemetryRAM');
      const netEl = document.getElementById('telemetryNet');
      
      if (fpsEl) fpsEl.textContent = Math.round(fps);
      if (cpuEl) cpuEl.innerHTML = `${Math.round(cpu)}<span style="font-size:1rem;">%</span>`;
      if (ramEl) ramEl.innerHTML = `${Math.round(ram)}<span style="font-size:0.875rem;">KB</span>`;
      if (netEl) netEl.innerHTML = `${Math.round(net)}<span style="font-size:0.875rem;">ms</span>`;

      drawGraph(graphs.fps, graphData.fps);
      drawGraph(graphs.cpu, graphData.cpu);
      drawGraph(graphs.ram, graphData.ram);
      drawGraph(graphs.net, graphData.net);
    }

    setInterval(updateTelemetry, 500);
    updateTelemetry();

    // === SLIDER BINDINGS ===
    function bindSlider({ slider, fill, thumb, label, min, max, format, onChange }) {
      const sliderEl = document.getElementById(slider);
      const fillEl = document.getElementById(fill);
      const thumbEl = document.getElementById(thumb);
      const labelEl = document.getElementById(label);
      if (!sliderEl) return;

      const update = () => {
        const v = Number(sliderEl.value);
        const minVal = min ?? Number(sliderEl.min);
        const maxVal = max ?? Number(sliderEl.max);
        const pct = ((v - minVal) / (maxVal - minVal)) * 100;
        if (fillEl) fillEl.style.width = `${pct}%`;
        if (thumbEl) thumbEl.style.left = `calc(${pct}% - 0.5rem)`;
        if (labelEl) labelEl.textContent = format ? format(v) : String(v);
        sliderEl.setAttribute('aria-valuenow', v);
        if (onChange) onChange(v);
      };

      sliderEl.addEventListener('input', update);
      update();
    }

    bindSlider({ slider: 'sliderBrightness', fill: 'fillBrightness', thumb: 'thumbBrightness', label: 'valBrightness', onChange: v => brightness = v / 255 });
    bindSlider({ slider: 'sliderSpeed', fill: 'fillSpeed', thumb: 'thumbSpeed', label: 'valSpeed', onChange: v => speed = v });
    bindSlider({ slider: 'sliderBlur', fill: 'fillBlur', thumb: 'thumbBlur', label: 'valBlur', format: v => (v / 100).toFixed(2) });
    bindSlider({ slider: 'sliderGamma', fill: 'fillGamma', thumb: 'thumbGamma', label: 'valGamma', min: 100, max: 320, format: v => (v / 100).toFixed(2) });

    // === DROPDOWN ===
    const paletteBtn = document.getElementById('paletteBtn');
    const paletteMenu = document.getElementById('paletteMenu');
    const paletteVal = document.getElementById('paletteVal');
    
    if (paletteBtn && paletteMenu) {
      paletteBtn.addEventListener('click', e => { 
        e.stopPropagation(); 
        const isExpanded = !paletteMenu.classList.contains('hidden');
        paletteMenu.classList.toggle('hidden'); 
        paletteBtn.setAttribute('aria-expanded', !isExpanded);
      });
      
      paletteMenu.querySelectorAll('.palette-item').forEach(item => {
        item.addEventListener('click', () => { 
          paletteVal.textContent = item.dataset.palette; 
          paletteMenu.classList.add('hidden');
          paletteBtn.setAttribute('aria-expanded', 'false');
          // Update aria-selected
          paletteMenu.querySelectorAll('.palette-item').forEach(i => {
            i.setAttribute('aria-selected', i === item);
            i.style.background = i === item ? 'rgba(255,255,255,0.05)' : 'transparent';
            i.style.color = i === item ? '#e6e9ef' : '#8b95a5';
          });
        });
      });
      
      document.addEventListener('click', () => {
        paletteMenu.classList.add('hidden');
        paletteBtn.setAttribute('aria-expanded', 'false');
      });
    }

    // === FAVORITE STAR TOGGLE ===
    document.querySelectorAll('[aria-label*="favorites"]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const isPressed = btn.getAttribute('aria-pressed') === 'true';
        btn.setAttribute('aria-pressed', !isPressed);
        const icon = btn.querySelector('iconify-icon');
        if (icon) {
          icon.style.color = !isPressed ? '#ffb84d' : '#717182';
        }
        btn.setAttribute('aria-label', !isPressed ? 'Remove from favorites' : 'Add to favorites');
      });
    });

    // === Demo: Toggle connection status ===
    // Uncomment to test disconnected state:
    // setTimeout(() => setConnectionStatus(false), 3000);
    // setTimeout(() => setConnectionStatus(true), 8000);
  </script>

</body></html>