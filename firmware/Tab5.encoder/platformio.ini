[platformio]
; Include WiFi credentials from gitignored file (if it exists)
; Copy wifi_credentials.ini.template to wifi_credentials.ini and edit
extra_configs = wifi_credentials.ini

; ============================================================================
; Tab5.encoder - M5Stack Tab5 (ESP32-P4) ROTATE8 Encoder Controller
; ============================================================================
; WARNING: PlatformIO ESP32-P4 support is experimental.
; Primary development path is Arduino IDE. See README.md for setup.
; ============================================================================

[env:tab5]
; Use pioarduino fork - only available ESP32-P4 Arduino support
platform = https://github.com/pioarduino/platform-espressif32.git#54.03.21
framework = arduino
board = esp32-p4-evboard
board_build.mcu = esp32p4
board_build.flash_mode = qio
; Larger partition for WiFi-enabled firmware (3MB app instead of 1.25MB)
board_build.partitions = huge_app.csv

monitor_speed = 115200
upload_speed = 1500000

build_flags =
    -DBOARD_HAS_PSRAM
    -DCORE_DEBUG_LEVEL=3
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    ${wifi_credentials.build_flags}

lib_deps =
    ; M5Unified and M5GFX from GitHub (latest Tab5 support)
    https://github.com/M5Stack/M5Unified.git
    https://github.com/M5Stack/M5GFX.git
    ; M5ROTATE8 encoder library
    robtillaart/M5ROTATE8@^0.4.1
    ; JSON parsing
    bblanchon/ArduinoJson@^7.0.0
    ; WebSocket client (for network milestone)
    links2004/WebSockets@^2.4.0
