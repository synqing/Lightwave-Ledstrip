# Constitution

## Evidence Table
- `mission_audio_reactive` | type=mission | status=superseded | confidence=high | first_seen=2025-06-23T20:30:27Z | last_seen=2026-02-09T16:01:39.531000Z
  - statement: The project mission is an audio-reactive LED controller experience with web/app control.
  - [O28425] 2026-02-09T16:01:39.531Z | Lightwave-Ledstrip | Examined PatternRegistry pattern families for color handling architecture PatternRegistry.cpp defines PatternFamily taxonomy with FLUID_PLASMA, GEOMETRIC, and other categories using CENTER_ORIGIN and palette-driven rendering.
  - [O28424] 2026-02-09T16:01:31.824Z | Lightwave-Ledstrip | PatternFamily::REACTIVE compilation error in WaveformParity registration WaveformParityEffect registration failed due to incorrect PatternFamily enum value REACTIVE not existing in codebase The WaveformParityEffect registration in PatternRegistry.cpp failed to compile because it referenced PatternFamily::REACTIVE, whi…
  - [O28417] 2026-02-09T15:56:19.430Z | Lightwave-Ledstrip | Examined SbWaveform310RefEffect reference implementation for palette-free color summation pattern SbWaveform310RefEffect uses note-chromagram color summation in chromatic mode, providing reference for multi-color injection without palette corruption.
  - [O28416] 2026-02-09T15:56:17.412Z | Lightwave-Ledstrip | Waveform Effect Implementations in LightwaveOS Effects directory contains multiple waveform visualizers including Sensory Bridge and ESv11 reference implementations The effects directory contains a comprehensive set of waveform visualization implementations spanning multiple audio visualization paradigms.
- `invariant_centre_origin` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-23T20:47:44Z | last_seen=2026-02-09T15:54:01.001000Z
  - statement: Effects originate from centre LEDs 79/80 and propagate outward/inward, not linear sweeps.
  - [O28415] 2026-02-09T15:54:01.001Z | Lightwave-Ledstrip | Firmware Successfully Flashed to Device with Palette-Driven Bloom and Runtime Control Infrastructure Deployed firmware to esp32dev_audio_esv11 hardware in 39.86 seconds with dual-layer motion system and externalized parameters The firmware was successfully deployed to the ESP32-S3 hardware running the esp32dev_audio_e…
  - [O28246] 2026-02-08T21:45:07.109Z | Lightwave-Ledstrip | Pattern Metadata Describes Beat Pulse Bloom at ID 121 PatternRegistry metadata at ID 121 still references Beat Pulse Bloom with beat+flux injection rather than BloomParityEffect A metadata inconsistency exists at pattern ID 121.
  - [O28235] 2026-02-08T21:42:04.041Z | Lightwave-Ledstrip | Effect Registration Pattern Using Static Instances CoreEffects.cpp registers effects via static instances with renderer->registerEffect() pattern, ID 98 currently occupied by SnapwaveLinearEffect The effect registration system in CoreEffects.cpp uses a static instance pattern where each effect is declared as a static…
  - [O28127] 2026-02-08T15:16:44.955Z | Lightwave-Ledstrip | Firmware Build Succeeded After BeatPulseBloom Fixes Clean build completed in 46.65 seconds with 30.6% flash and 34.4% RAM usage, validating Sensory Bridge transport reversion and silentScale fix.
- `invariant_no_linear_sweep` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-26T02:37:21Z | last_seen=2026-02-09T15:59:10.592000Z
  - statement: Linear sweep rendering is rejected in favour of centre-origin motion semantics.
  - [O28421] 2026-02-09T15:59:10.592Z | Lightwave-Ledstrip | SB Waveform Parity Effect Registered as Effect ID 123 Added Sensory Bridge 3.1.0 waveform mode to pattern registry with intensity-only rendering and palette output A new Sensory Bridge waveform parity effect has been registered in the pattern registry as effect ID 123, positioned after Kuramoto Transport (ID 122).
  - [O28419] 2026-02-09T15:56:29.928Z | Lightwave-Ledstrip | CoreEffects Center-Origin LED Geometry Constants CoreEffects.h defines CENTER_LEFT=79, CENTER_RIGHT=80 as injection points for dual-strip 160-LED center-origin layout The primary session is examining CoreEffects.h to understand the LED geometry constants that define the center-origin layout used throughout the codebas…
  - [O28256] 2026-02-09T07:10:37.472Z | Lightwave-Ledstrip | SavedZonePreset model stores complete user zone configurations Distinct from built-in ZonePreset, contains full zone details including effects, palettes, segments, and timestamps SavedZonePreset is a comprehensive data model for user-created zone configurations, distinct from the built-in ZonePreset layouts.
  - [O28241] 2026-02-08T21:43:58.565Z | Lightwave-Ledstrip | BloomParityEffect Implementation Complete Full 7-step transport pipeline implemented with exact Sensory Bridge constants and chromagram-driven injection The complete BloomParityEffect implementation delivers exact Sensory Bridge Bloom behavior replication.
- `invariant_no_rainbow` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-23T23:54:39Z | last_seen=2026-02-09T15:21:35.350000Z
  - statement: Rainbow cycling and full hue-wheel sweeps are disallowed.
  - [O28393] 2026-02-09T15:21:35.350Z | Lightwave-Ledstrip | Palette Usage Pattern in LGPBoxWaveEffect Effect uses ctx.palette.getColor with hue-based index and calculated brightness for color wave rendering The LGPBoxWaveEffect demonstrates standard palette usage patterns in LightwaveOS effects.
  - [O28371] 2026-02-09T15:06:39.797Z | Lightwave-Ledstrip | Bloom Injection Refactored to Palette-Driven Color System Replaced HSV color summation with direct palette sampling, mapping 12 chroma bins to palette positions for dynamic color vocabulary The Bloom injection computation was completely refactored from HSV-based color summation to a palette-driven system.
  - [O28358] 2026-02-09T14:56:27.180Z | Lightwave-Ledstrip | User Requests Prism Opacity Uncapping and Palette-Based Color System Two enhancement requests: remove 1.0 prism opacity cap for extreme ghosting effects, replace HSV with palette-driven color User provided feedback on Bloom parity implementation, confirming the prism effect's ghost layering behavior works as designed…
  - [O28311] 2026-02-09T07:41:59.522Z | Lightwave-Ledstrip | FastLED Color Parity Fixes Compiled Successfully Build completed with forceSaturation 8-bit round-trip and FastLED CHSV rainbow HSV model integration The firmware successfully compiled after implementing the two critical color model changes for Sensory Bridge parity.
- `invariant_no_heap_render` | type=invariant | status=superseded | confidence=high | first_seen=2025-09-23T11:12:45.208000Z | last_seen=2026-02-09T15:12:29.525000Z
  - statement: Render paths avoid dynamic heap allocation and use static buffers.
  - [O28387] 2026-02-09T15:12:29.525Z | Lightwave-Ledstrip | Prism Iterations Converted from Constant to Runtime-Tunable Variable Changed kPrismIterations from constexpr to static s_prismIterations for dynamic adjustment during effect runtime The prism iteration count was refactored from a compile-time constant (kPrismIterations) to a runtime-tunable static variable (s_prismIte…
  - [O28285] 2026-02-09T07:30:48.198Z | Lightwave-Ledstrip | ZonePresetsCard Rebuilt Successfully After AppViewModel Timing Adjustments App recompiled with reverted timing changes, compiling ZonePresetsCard.swift without errors alongside zone-related files.
  - [O28286] 2026-02-09T07:30:37.411Z | Lightwave-Ledstrip | Existing BloomParityEffect.cpp Implementation Details Implementation contains complete transport pipeline with subpixel advection, chroma injection, and hue shift but lacks post-FX layers The BloomParityEffect.cpp implementation provides a complete port of Sensory Bridge's Bloom transport mechanics.
  - [O28100] 2026-02-08T14:07:13.926Z | Lightwave-Ledstrip | Sensory Bridge Bloom Formula Restored in BeatPulseBloomEffect Transport Tuning Transport velocity driven by MOOD parameter (0.25 + 1.75*MOOD) with speed as multiplier, fadeAmount controls persistence.
  - conflicts:
    - [O24361] 2026-01-31T22:12:35.833Z | lightwave-controller | Root ARCHITECTURE.md provides extracted system facts for agent quick reference 234-line document distills key architectural information from extensive docs/architecture/ directory The root ARCHITECTURE.md implements progressive disclosure by extracting essential architectural facts from the extensive docs/architecture…
    - [O12111] 2026-01-06T22:10:24.934Z | v2 | Agent Progress Log and Lessons Learned Progress log tracks agent runs with persistent lessons on build issues, effect development patterns, and common failures The project maintains a comprehensive agent progress log using an append-only format to track all agent execution runs.
    - [O9506] 2025-12-31T09:11:10.630Z | Lightwave-Ledstrip | LightwaveOS Architecture and Design Constraints ESP32-S3 LED controller achieving 176 FPS with strict center-origin effect pattern and hardware-specific design rules LightwaveOS is a high-performance LED visualization system built for ESP32-S3 hardware with strict architectural constraints driven by physical hardware…
- `invariant_static_buffers_render` | type=invariant | status=superseded | confidence=high | first_seen=2025-09-23T11:12:45.208000Z | last_seen=2026-02-07T21:22:34.944000Z
  - statement: Fixed/static render buffers are a non-negotiable requirement for runtime stability.
  - [O27727] 2026-02-07T21:22:34.944Z | Lightwave-Ledstrip | Comprehensive render path performance audit reveals expensive math operations and centre-origin violations Code reviewer agent found critical performance issues: nested expf() loops (1920 calls/frame), multiple effects using expensive powf/sqrtf in inner loops, and 4 effects violating centre-origin rendering conventio…
  - [O27614] 2026-02-07T19:17:13.192Z | Lightwave-Ledstrip | Build Success After Post-Processor Modification - Memory Usage Increased Firmware compiled successfully in 41.74 seconds with RAM at 30.2% (98,908 bytes) and Flash at 29.8% (1,951,653 bytes) The primary session rebuilt the firmware after modifying the post-processor component, achieving a successful compilation.
  - [O27564] 2026-02-07T18:47:51.083Z | Lightwave-Ledstrip | System Constraints Document - Performance, Memory, and Power Budgets ["Frame budget is 8.33ms for 120 FPS with effect calculation limited to 2ms max (typical 1.2ms) before FastLED.show() consumes 2.5ms","ESP32-S3 has 320KB SRAM with 280KB available after boot; LED buffer is 960 bytes (320 LEDs × 3 RGB), transition buf…
  - [O27544] 2026-02-07T18:42:26.268Z | Lightwave-Ledstrip | System Constraints and Performance Budget for Effect Development Examined hard limits including 2ms effect calculation budget, 120 FPS target, centre-origin rendering requirement, and power safety constraints.
  - conflicts:
    - [O27564] 2026-02-07T18:47:51.083Z | Lightwave-Ledstrip | System Constraints Document - Performance, Memory, and Power Budgets ["Frame budget is 8.33ms for 120 FPS with effect calculation limited to 2ms max (typical 1.2ms) before FastLED.show() consumes 2.5ms","ESP32-S3 has 320KB SRAM with 280KB available after boot; LED buffer is 960 bytes (320 LEDs × 3 RGB), transition buf…
    - [O27544] 2026-02-07T18:42:26.268Z | Lightwave-Ledstrip | System Constraints and Performance Budget for Effect Development Examined hard limits including 2ms effect calculation budget, 120 FPS target, centre-origin rendering requirement, and power safety constraints.
    - [O26749] 2026-02-06T16:02:52.360Z | Lightwave-Ledstrip | LGPCrystallineGrowthEffect Fixed Crystal Arrays - Zero Dynamic Allocation in Render Path Effect implementation uses compile-time sized arrays for 10 crystal states totaling 30 bytes avoiding per-frame allocations during rendering Reading LGPCrystallineGrowthEffect.cpp demonstrated the render-path zero-allocation princ…
- `invariant_psram_required` | type=invariant | status=superseded | confidence=high | first_seen=2025-10-15T19:05:16.559000Z | last_seen=2026-02-08T14:59:11.275000Z
  - statement: PSRAM is mandatory for runtime stability and memory budgets.
  - [O28123] 2026-02-08T14:59:11.275Z | Lightwave-Ledstrip | Kuramoto Oscillator Research Documentation Created Comprehensive research documents covering mathematics, computational efficiency, audio mapping, and implementation roadmap for coupled oscillator LED effects.
  - [O28002] 2026-02-08T12:45:13.689Z | Lightwave-Ledstrip | BeatPulseBloomEffect Added and Successfully Compiled New effect compiled successfully increasing RAM usage from 29.3% to 31.6% (7.8 KB increase) and Flash from 30.4% to 30.5% (4.2 KB increase) The primary session added a new effect called BeatPulseBloomEffect and successfully compiled it into the firmware.
  - [O27979] 2026-02-08T12:08:10.154Z | Lightwave-Ledstrip | Firmware successfully uploaded to device - esp32dev_audio_esv11 build with 81.64 second total time Full compilation and upload completed: 1.96MB firmware (29.9% flash), 106KB RAM (32.6%), deployed to ESP32-S3 at MAC b4:3a:45:a5:89:b4.
  - [O27968] 2026-02-08T12:02:27.457Z | Lightwave-Ledstrip | Clock Spine Fix Part 1 Verified: Successful Build Compilation RendererActor esp_timer_get_time() patch compiles successfully with 30.5% flash usage, validating first surgical fix Build verification confirms the first clock spine architecture fix compiles successfully without errors.
- `invariant_120fps_budget` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-23T20:30:27Z | last_seen=2026-02-09T14:35:25.424000Z
  - statement: The renderer targets 120 FPS and strict per-frame execution budgets.
  - [O28339] 2026-02-09T14:35:25.424Z | Lightwave-Ledstrip | Firmware implements clock spine render timing diagnostics with 2-second logging intervals RendererActor.cpp tracks audio frame age, render intervals, and beat clock integration with detailed performance metrics.
  - [O28338] 2026-02-09T14:34:00.302Z | Lightwave-Ledstrip | RendererActor runs at 120 FPS on ESP32 Core 1 with tight frame budget RendererActor implementation shows 8.33ms frame budget with 2-4ms render time and 2ms LED driver overhead.
  - [O28123] 2026-02-08T14:59:11.275Z | Lightwave-Ledstrip | Kuramoto Oscillator Research Documentation Created Comprehensive research documents covering mathematics, computational efficiency, audio mapping, and implementation roadmap for coupled oscillator LED effects.
  - [O28120] 2026-02-08T14:56:40.299Z | Lightwave-Ledstrip | Architected Complete Oscillator Field System Integration Pattern Designed three-layer architecture with PSRAM-backed OscillatorField physics engine, abstract OscillatorFieldEffect base, and concrete effect implementations.
- `invariant_watchdog_safety` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-23T23:14:50Z | last_seen=2026-02-09T14:40:46.573000Z
  - statement: Watchdog-safe scheduling and timing behaviour are mandatory system guardrails.
  - [O28340] 2026-02-09T14:40:46.573Z | Lightwave-Ledstrip | LightwaveOS Serial Command Interface and Parameter Adjustment Pattern Serial interface uses immediate single-character hotkeys for real-time adjustments plus line-buffered multi-character commands with actor messaging system The LightwaveOS serial interface implements a dual-mode command system for parameter adjustmen…
  - [O28338] 2026-02-09T14:34:00.302Z | Lightwave-Ledstrip | RendererActor runs at 120 FPS on ESP32 Core 1 with tight frame budget RendererActor implementation shows 8.33ms frame budget with 2-4ms render time and 2ms LED driver overhead.
  - [O28331] 2026-02-09T14:32:06.270Z | Lightwave-Ledstrip | iOS app implements soft AP UDP bypass for streaming reliability AppViewModel detects soft AP subnet and skips UDP streaming, using WebSocket-only mode to avoid routing issues.
  - [O28326] 2026-02-09T14:30:47.110Z | Lightwave-Ledstrip | ConnectionManager WebSocket event stream has single consumer architecture AppViewModel is sole consumer of WebSocket events; must call notifyWebSocketDisconnected() to trigger reconnection.
- `invariant_rest_ws_contract` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-24T02:28:53Z | last_seen=2026-02-09T15:59:51.150000Z
  - statement: REST plus WebSocket contracts are stable control-plane invariants for device control and streaming.
  - [O28423] 2026-02-09T15:59:51.150Z | Lightwave-Ledstrip | Firmware implements serial command interface for effect selection via keyboard main.cpp serial handler maps keys a-k to effects 10-20 while reserving command letters for system functions.
  - [O28407] 2026-02-09T15:51:30.569Z | Lightwave-Ledstrip | Additional Runtime-Tunable Parameters Added to BloomParityEffect s_alpha, s_squareIter, and s_prismIterations exposed as static variables alongside opacity controls The BloomParityEffect header was expanded to expose three additional core algorithm parameters as runtime-tunable static variables.
  - [O28406] 2026-02-09T15:51:06.946Z | Lightwave-Ledstrip | Complete Runtime-Tunable Parameter Interface Added to BloomParityEffect Five static getter/setter pairs expose all Bloom tuning parameters with range validation for live adjustment BloomParityEffect was completed with a comprehensive runtime-tunable parameter interface exposing five critical visual controls.
  - [O28399] 2026-02-09T15:33:08.292Z | Lightwave-Ledstrip | Refactored Bloom injection to grayscale-only transport, deferring palette mapping to output stage computeInjection() now returns grayscale intensity values, eliminating color corruption by moving palette lookups to final LED output.
- `invariant_ap_sta_resilience` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-23T20:30:27Z | last_seen=2026-02-09T16:01:39.531000Z
  - statement: AP/STA fallback behaviour is preserved as a resilience invariant.
  - [O28425] 2026-02-09T16:01:39.531Z | Lightwave-Ledstrip | Examined PatternRegistry pattern families for color handling architecture PatternRegistry.cpp defines PatternFamily taxonomy with FLUID_PLASMA, GEOMETRIC, and other categories using CENTER_ORIGIN and palette-driven rendering.
  - [O28424] 2026-02-09T16:01:31.824Z | Lightwave-Ledstrip | PatternFamily::REACTIVE compilation error in WaveformParity registration WaveformParityEffect registration failed due to incorrect PatternFamily enum value REACTIVE not existing in codebase The WaveformParityEffect registration in PatternRegistry.cpp failed to compile because it referenced PatternFamily::REACTIVE, whi…
  - [O28421] 2026-02-09T15:59:10.592Z | Lightwave-Ledstrip | SB Waveform Parity Effect Registered as Effect ID 123 Added Sensory Bridge 3.1.0 waveform mode to pattern registry with intensity-only rendering and palette output A new Sensory Bridge waveform parity effect has been registered in the pattern registry as effect ID 123, positioned after Kuramoto Transport (ID 122).
  - [O28419] 2026-02-09T15:56:29.928Z | Lightwave-Ledstrip | CoreEffects Center-Origin LED Geometry Constants CoreEffects.h defines CENTER_LEFT=79, CENTER_RIGHT=80 as injection points for dual-strip 160-LED center-origin layout The primary session is examining CoreEffects.h to understand the LED geometry constants that define the center-origin layout used throughout the codebas…
- `invariant_ip_first_discovery` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-23T23:26:36Z | last_seen=2026-02-09T15:56:17.412000Z
  - statement: Discovery prioritises deterministic IP paths with mDNS as hint/fallback.
  - [O28416] 2026-02-09T15:56:17.412Z | Lightwave-Ledstrip | Waveform Effect Implementations in LightwaveOS Effects directory contains multiple waveform visualizers including Sensory Bridge and ESv11 reference implementations The effects directory contains a comprehensive set of waveform visualization implementations spanning multiple audio visualization paradigms.
  - [O28375] 2026-02-09T15:08:08.248Z | Lightwave-Ledstrip | Audio sequence logging found in RendererActor RendererActor.cpp contains "Audio OK" message with sequence number tracking for audio frame processing.
  - [O28360] 2026-02-09T14:58:01.637Z | Lightwave-Ledstrip | Serial command interface effect iteration mapping Located 'i' command for effect iteration in firmware main.cpp serial command handler Investigation located the firmware's serial command handler for effect iteration, likely mapped to the 'i' key in the main.cpp command processing loop.
  - [O28341] 2026-02-09T14:40:46.862Z | Lightwave-Ledstrip | Final BloomParityEffect Implementation with Complete Color Parity Implementation now includes FastLED rainbow HSV model and 8-bit round-trip for both forceSaturation and forceHue The final BloomParityEffect implementation achieves comprehensive Sensory Bridge visual parity through correct color model implementation.
- `invariant_actor_state_ownership` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-25T12:05:40Z | last_seen=2026-02-09T15:56:19.430000Z
  - statement: Actor boundaries and explicit state ownership are maintained as concurrency invariants.
  - [O28417] 2026-02-09T15:56:19.430Z | Lightwave-Ledstrip | Examined SbWaveform310RefEffect reference implementation for palette-free color summation pattern SbWaveform310RefEffect uses note-chromagram color summation in chromatic mode, providing reference for multi-color injection without palette corruption.
  - [O28399] 2026-02-09T15:33:08.292Z | Lightwave-Ledstrip | Refactored Bloom injection to grayscale-only transport, deferring palette mapping to output stage computeInjection() now returns grayscale intensity values, eliminating color corruption by moving palette lookups to final LED output.
  - [O28398] 2026-02-09T15:31:51.123Z | Lightwave-Ledstrip | Bloom Mode Injection Algorithm Requires Complete Redesign Current weighted centroid approach still produces oversaturated visuals requiring fundamental rethink of color injection strategy After implementing a weighted centroid voting algorithm to replace the RGB accumulation loop in BloomParityEffect.cpp's computeInje…
  - [O28395] 2026-02-09T15:21:59.709Z | Lightwave-Ledstrip | Firmware Build Completed with Runtime Parameter Control and Palette-Driven Bloom Successfully compiled esp32dev_audio_esv11 firmware with externalized tunables, palette injection system, and keyboard control infrastructure The firmware build successfully compiled with major architectural changes to the Bloom effect sy…
- `invariant_limits_single_source` | type=invariant | status=superseded | confidence=high | first_seen=2025-10-08T17:21:30.295000Z | last_seen=2026-02-09T16:01:31.824000Z
  - statement: System limits are enforced through single-source constants with validation checks.
  - [O28424] 2026-02-09T16:01:31.824Z | Lightwave-Ledstrip | PatternFamily::REACTIVE compilation error in WaveformParity registration WaveformParityEffect registration failed due to incorrect PatternFamily enum value REACTIVE not existing in codebase The WaveformParityEffect registration in PatternRegistry.cpp failed to compile because it referenced PatternFamily::REACTIVE, whi…
  - [O28238] 2026-02-08T21:43:02.979Z | Lightwave-Ledstrip | Effect Registration Ends at ID 122 with Validation Registration sequence concludes with Kuramoto Transport at ID 122 followed by count validation against limits::MAX_EFFECTS The effect registration concludes with Kuramoto Transport at ID 122, followed by validation logic that compares the actual registration count aga…
  - [O28090] 2026-02-08T14:00:34.123Z | Lightwave-Ledstrip | Effect Registration in CoreEffects with Count Validation BeatPulseBloomEffect registered as effect ID 121 with runtime parity validation against MAX_EFFECTS limit.
  - [O28088] 2026-02-08T14:00:06.815Z | Lightwave-Ledstrip | BeatPulseBloomEffect Integration Status in Codebase Effect ID 121 already integrated into CoreEffects.cpp with static instance but PatternRegistry entry incomplete.
- `invariant_led_topology` | type=invariant | status=superseded | confidence=high | first_seen=2025-06-23T20:30:27Z | last_seen=2026-02-09T15:59:10.592000Z
  - statement: Dual-strip 320-LED WS2812 topology is a fixed product invariant.
  - [O28421] 2026-02-09T15:59:10.592Z | Lightwave-Ledstrip | SB Waveform Parity Effect Registered as Effect ID 123 Added Sensory Bridge 3.1.0 waveform mode to pattern registry with intensity-only rendering and palette output A new Sensory Bridge waveform parity effect has been registered in the pattern registry as effect ID 123, positioned after Kuramoto Transport (ID 122).
  - [O28419] 2026-02-09T15:56:29.928Z | Lightwave-Ledstrip | CoreEffects Center-Origin LED Geometry Constants CoreEffects.h defines CENTER_LEFT=79, CENTER_RIGHT=80 as injection points for dual-strip 160-LED center-origin layout The primary session is examining CoreEffects.h to understand the LED geometry constants that define the center-origin layout used throughout the codebas…
  - [O28393] 2026-02-09T15:21:35.350Z | Lightwave-Ledstrip | Palette Usage Pattern in LGPBoxWaveEffect Effect uses ctx.palette.getColor with hue-based index and calculated brightness for color wave rendering The LGPBoxWaveEffect demonstrates standard palette usage patterns in LightwaveOS effects.
  - [O28392] 2026-02-09T15:21:21.717Z | Lightwave-Ledstrip | PaletteRef getColor() Usage Pattern in Effects Effects use ctx.palette.getColor(paletteIndex, brightness) for indexed color lookup with brightness scaling The primary session is examining how other effects use ctx.palette.getColor() to understand the pattern for runtime parameter access.