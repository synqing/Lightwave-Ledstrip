# Product Spec

## Evidence Table
- `product_hw_led_topology` | type=spec | status=superseded | confidence=high | first_seen=2025-06-23T20:30:27Z | last_seen=2026-02-09T15:59:10.592000Z
  - statement: K1-Lightwave uses dual-strip LED topology with 320 WS2812 pixels.
  - [O28421] 2026-02-09T15:59:10.592Z | Lightwave-Ledstrip | SB Waveform Parity Effect Registered as Effect ID 123 Added Sensory Bridge 3.1.0 waveform mode to pattern registry with intensity-only rendering and palette output A new Sensory Bridge waveform parity effect has been registered in the pattern registry as effect ID 123, positioned after Kuramoto Transport (ID 122).
  - [O28419] 2026-02-09T15:56:29.928Z | Lightwave-Ledstrip | CoreEffects Center-Origin LED Geometry Constants CoreEffects.h defines CENTER_LEFT=79, CENTER_RIGHT=80 as injection points for dual-strip 160-LED center-origin layout The primary session is examining CoreEffects.h to understand the LED geometry constants that define the center-origin layout used throughout the codebas…
  - [O28393] 2026-02-09T15:21:35.350Z | Lightwave-Ledstrip | Palette Usage Pattern in LGPBoxWaveEffect Effect uses ctx.palette.getColor with hue-based index and calculated brightness for color wave rendering The LGPBoxWaveEffect demonstrates standard palette usage patterns in LightwaveOS effects.
  - [O28392] 2026-02-09T15:21:21.717Z | Lightwave-Ledstrip | PaletteRef getColor() Usage Pattern in Effects Effects use ctx.palette.getColor(paletteIndex, brightness) for indexed color lookup with brightness scaling The primary session is examining how other effects use ctx.palette.getColor() to understand the pattern for runtime parameter access.
- `product_runtime_constraints` | type=spec | status=superseded | confidence=high | first_seen=2025-06-23T23:14:50Z | last_seen=2026-02-09T15:08:40.398000Z
  - statement: Runtime constraints include PSRAM reliance, deterministic render cadence, and watchdog-safe execution.
  - [O28378] 2026-02-09T15:08:40.398Z | Lightwave-Ledstrip | RendererActor provides dependency injection for zone composer, audio buffer, and tempo tracker RendererActor.h exposes setter methods for external dependencies including ZoneComposer, audio snapshot buffer, and TempoTracker.
  - [O28338] 2026-02-09T14:34:00.302Z | Lightwave-Ledstrip | RendererActor runs at 120 FPS on ESP32 Core 1 with tight frame budget RendererActor implementation shows 8.33ms frame budget with 2-4ms render time and 2ms LED driver overhead.
  - [O28336] 2026-02-09T14:33:33.081Z | Lightwave-Ledstrip | RendererActor logs clock spine render statistics every 2 seconds Firmware tracks frame age, delta time, and new frame counts with periodic diagnostic logging.
  - [O28286] 2026-02-09T07:30:37.411Z | Lightwave-Ledstrip | Existing BloomParityEffect.cpp Implementation Details Implementation contains complete transport pipeline with subpixel advection, chroma injection, and hue shift but lacks post-FX layers The BloomParityEffect.cpp implementation provides a complete port of Sensory Bridge's Bloom transport mechanics.
- `product_audio_visual_path` | type=spec | status=superseded | confidence=high | first_seen=2025-06-23T20:30:27Z | last_seen=2026-02-09T16:01:54.129000Z
  - statement: Audio analysis features drive visual parameter mapping in the render pipeline.
  - [O28426] 2026-02-09T16:01:54.129Z | Lightwave-Ledstrip | SB Waveform (Parity) Recategorized from REACTIVE to FLUID_PLASMA Family Pattern family changed to match rendering architecture and visual characteristics over audio dependency.
  - [O28425] 2026-02-09T16:01:39.531Z | Lightwave-Ledstrip | Examined PatternRegistry pattern families for color handling architecture PatternRegistry.cpp defines PatternFamily taxonomy with FLUID_PLASMA, GEOMETRIC, and other categories using CENTER_ORIGIN and palette-driven rendering.
  - [O28424] 2026-02-09T16:01:31.824Z | Lightwave-Ledstrip | PatternFamily::REACTIVE compilation error in WaveformParity registration WaveformParityEffect registration failed due to incorrect PatternFamily enum value REACTIVE not existing in codebase The WaveformParityEffect registration in PatternRegistry.cpp failed to compile because it referenced PatternFamily::REACTIVE, whi…
  - [O28423] 2026-02-09T15:59:51.150Z | Lightwave-Ledstrip | Firmware implements serial command interface for effect selection via keyboard main.cpp serial handler maps keys a-k to effects 10-20 while reserving command letters for system functions.
- `product_control_interfaces` | type=spec | status=superseded | confidence=high | first_seen=2025-06-24T02:28:53Z | last_seen=2026-02-09T15:59:51.150000Z
  - statement: Control surfaces include REST/WebSocket APIs and app/dashboard clients.
  - [O28423] 2026-02-09T15:59:51.150Z | Lightwave-Ledstrip | Firmware implements serial command interface for effect selection via keyboard main.cpp serial handler maps keys a-k to effects 10-20 while reserving command letters for system functions.
  - [O28407] 2026-02-09T15:51:30.569Z | Lightwave-Ledstrip | Additional Runtime-Tunable Parameters Added to BloomParityEffect s_alpha, s_squareIter, and s_prismIterations exposed as static variables alongside opacity controls The BloomParityEffect header was expanded to expose three additional core algorithm parameters as runtime-tunable static variables.
  - [O28406] 2026-02-09T15:51:06.946Z | Lightwave-Ledstrip | Complete Runtime-Tunable Parameter Interface Added to BloomParityEffect Five static getter/setter pairs expose all Bloom tuning parameters with range validation for live adjustment BloomParityEffect was completed with a comprehensive runtime-tunable parameter interface exposing five critical visual controls.
  - [O28399] 2026-02-09T15:33:08.292Z | Lightwave-Ledstrip | Refactored Bloom injection to grayscale-only transport, deferring palette mapping to output stage computeInjection() now returns grayscale intensity values, eliminating color corruption by moving palette lookups to final LED output.